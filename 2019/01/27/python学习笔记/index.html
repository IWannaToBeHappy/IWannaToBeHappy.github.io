<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">



  
  
    
    
  <script src="/lib/pace/pace.min.js?v=1.0.2"></script>
  <link href="/lib/pace/pace-theme-minimal.min.css?v=1.0.2" rel="stylesheet">







<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="python," />





  <link rel="alternate" href="/atom.xml" title="种菜园" type="application/atom+xml" />






<meta name="description" content="前言  python的基础学习依照廖雪峰的教程学习  今天将笔记从本机搬迁到博客上，顺便复习一遍  笔记用于复习，基本上用代码直接介绍功能。">
<meta property="og:type" content="article">
<meta property="og:title" content="python学习笔记">
<meta property="og:url" content="https://iwannatobehappy.github.io/2019/01/27/python%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/index.html">
<meta property="og:site_name" content="种菜园">
<meta property="og:description" content="前言  python的基础学习依照廖雪峰的教程学习  今天将笔记从本机搬迁到博客上，顺便复习一遍  笔记用于复习，基本上用代码直接介绍功能。">
<meta property="article:published_time" content="2019-01-27T08:40:07.000Z">
<meta property="article:modified_time" content="2019-02-28T07:50:06.917Z">
<meta property="article:author" content="陈潇">
<meta property="article:tag" content="python">
<meta name="twitter:card" content="summary">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://iwannatobehappy.github.io/2019/01/27/python学习笔记/"/>





  <title>python学习笔记 | 种菜园</title>
  








<meta name="generator" content="Hexo 4.2.0"></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">种菜园</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://iwannatobehappy.github.io/2019/01/27/python%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="陈潇">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="种菜园">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">python学习笔记</h1>
        

        <div class="post-meta">
          <span class="post-time">
		  
		  
		  
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-01-27T16:40:07+08:00">
                2019-01-27
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/01/27/python%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2019/01/27/python%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          
            <span class="post-meta-divider">|</span>
            <span class="page-pv"><i class="fa fa-eye"></i>
            <span class="busuanzi-value" id="busuanzi_value_page_pv" ></span>
            </span>
          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  9.3k
                </span>
              

              

              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>  python的基础学习依照<a href="https://www.liaoxuefeng.com/wiki/0014316089557264a6b348958f449949df42a6d3a2e542c000/001431611988455689d4c116b2c4ed6aec000776c00ed52000" target="_blank" rel="noopener">廖雪峰的教程</a>学习<br>  今天将笔记从本机搬迁到博客上，顺便复习一遍<br>  笔记用于复习，基本上用代码直接介绍功能。</p>
<a id="more"></a>

<h1 id="python语言最基础"><a href="#python语言最基础" class="headerlink" title="python语言最基础"></a>python语言最基础</h1><h2 id="字符编码"><a href="#字符编码" class="headerlink" title="字符编码"></a>字符编码</h2><hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">print(ord(&#39;中&#39;)&#x3D;&#x3D;20013)#字符转化为Unicode编码</span><br><span class="line">print(chr(25991)&#x3D;&#x3D;&#39;文&#39;)#Unicode编码转化为字符</span><br><span class="line">print(&#39;\u4e2d\u6587&#39;&#x3D;&#x3D;&#39;中文&#39;)</span><br><span class="line">print(&#39;A&#39;!&#x3D;b&#39;A&#39;)#b(bytes)每个字符只占一字节</span><br><span class="line">print(&#39;ABC&#39;.encode(&#39;ascii&#39;))#使用ASCII编码变为bytes</span><br><span class="line">print(&#39;中文&#39;.encode(&#39;utf-8&#39;))#使用utf-8编码变为bytes</span><br><span class="line">print(b&#39;ABC&#39;.decode(&#39;utf-8&#39;,errors&#x3D;&#39;ignore&#39;))#网络磁盘读取的字节流都是bytes,errors可以忽略无法编译的字符</span><br><span class="line">print(len(&#39;ABC&#39;))</span><br></pre></td></tr></table></figure>

<h2 id="列表与元组"><a href="#列表与元组" class="headerlink" title="列表与元组"></a>列表与元组</h2><hr>
<ul>
<li>list:[]<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">list.append(&#39;new&#39;)</span><br><span class="line">	list.insert(i,&#39;new&#39;)</span><br><span class="line">	list.pop(i)</span><br><span class="line">	list[i]&#x3D;&#39;new&#39;</span><br><span class="line">	list.sort()</span><br><span class="line">	list[0:-1:1]#[start,stop,step]</span><br><span class="line">	[x+y for x in range(1,11) if x % 2 &#x3D;&#x3D; 0 </span><br><span class="line">	    for y in range(1,10,2)]#列表生成式</span><br></pre></td></tr></table></figure></li>
<li>tuple:()<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tuple&#x3D;(1,)</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="可迭代与迭代器"><a href="#可迭代与迭代器" class="headerlink" title="可迭代与迭代器"></a>可迭代与迭代器</h2><hr>
<ul>
<li><p>可迭代<br>在Python中如果一个对象有<code>__iter__( )</code>方法或<code>__getitem__( )</code>方法，则称这个对象是可迭代的（Iterable）；其中<code>__iter__( )</code>方法的作用是让对象可以用for … in循环遍历，<code>__getitem__( )</code>方法是让对象可以通过“实例名[index]”的方式访问实例中的元素。换句话说，两个条件只要满足一条，就可以说对象是可迭代的。显然列表List、元组Tuple、字典Dictionary、字符串String等数据类型都是可迭代的。当然因为Python的“鸭子类型”，我们自定义的类中只要实现了<code>__iter__( )</code>方法或<code>__getitem__( )</code>方法，也是可迭代的。</p>
</li>
<li><p>迭代器<br>在Python中如果一个对象有<code>__iter__( )</code>方法和<code>__next__( )</code>方法，则称这个对象是迭代器（Iterator）；其中<code>__iter__( )</code>方法是让对象可以用for … in循环遍历，<code>__next__( )</code>方法是让对象可以通过next(实例名)访问下一个元素。注意：这两个方法必须同时具备，才能称之为迭代器。列表List、元组Tuple、字典Dictionary、字符串String等数据类型虽然是可迭代的，但都不是迭代器，因为他们都没有<code>__next__( )</code>方法。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">from collections import Iterable</span><br><span class="line">isinstance([], Iterable)&#x3D;&#x3D;True#判断可迭代对象</span><br><span class="line">from collections import Iterator</span><br><span class="line">isinstance((x for x in range(10)), Iterator)#判断迭代器</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="循环"><a href="#循环" class="headerlink" title="循环"></a>循环</h2><hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">for x in list_or_tuple:</span><br><span class="line">    pass</span><br><span class="line">for key,value in dict:</span><br><span class="line">    pass</span><br></pre></td></tr></table></figure>
<p><code>range</code>通常用于构造循环，当变量仅仅用于表明循环次数而不会被使用是，可以使用 <code>for _ in range(num)</code> 来声明变量。</p>
<h2 id="dict与set"><a href="#dict与set" class="headerlink" title="dict与set"></a>dict与set</h2><hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Dict&#x3D;&#123;&#39;key&#39;:value&#125;</span><br><span class="line">&#39;key&#39; in dict&#x3D;&#x3D;True</span><br><span class="line">Dict.get(&#39;new&#39;,newvalue)</span><br><span class="line">Dict.pop(&#39;new&#39;)</span><br><span class="line">Set1&#x3D;set([1,2,2])</span><br><span class="line">Set1.add(3)</span><br><span class="line">Set1.remove(3)</span><br><span class="line">Set2&#x3D;&#123;2,3&#125;</span><br><span class="line">Set1&amp;Set2#与</span><br><span class="line">Set1|Set2#或</span><br></pre></td></tr></table></figure>

<h2 id="数组转化为字符串——join"><a href="#数组转化为字符串——join" class="headerlink" title="数组转化为字符串——join"></a>数组转化为字符串——join</h2><hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">String &#x3D; &#39;,&#39;.join(listOrTuple)</span><br></pre></td></tr></table></figure>

<h1 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h1><h2 id="函数参数"><a href="#函数参数" class="headerlink" title="函数参数"></a>函数参数</h2><hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">def f(a, b, c&#x3D;0, *, d, **kw):</span><br><span class="line">    pass</span><br><span class="line">#位置参数为最普通的参数</span><br><span class="line">#默认参数必须为不变对象</span><br><span class="line">#命名关键字参数 只可且必须（如果没有默认参数）传入d的dict</span><br><span class="line">#关键字参数**kw可以不传入或传入dict</span><br><span class="line">#对于任意函数，都可以使用func(*args,**kw)进行调用</span><br></pre></td></tr></table></figure>

<h2 id="普通递归与尾递归"><a href="#普通递归与尾递归" class="headerlink" title="普通递归与尾递归"></a>普通递归与尾递归</h2><hr>
<ul>
<li>普通递归<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">def fact(n):</span><br><span class="line">    if n&#x3D;&#x3D;1:</span><br><span class="line">        return 1</span><br><span class="line">    return n * fact(n - 1)</span><br></pre></td></tr></table></figure></li>
<li>尾递归<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">def fact(n):</span><br><span class="line">    return fact_iter(n, 1)</span><br><span class="line"></span><br><span class="line">def fact_iter(num, product):</span><br><span class="line">    if num &#x3D;&#x3D; 1:</span><br><span class="line">        return product</span><br><span class="line">    return fact_iter(num - 1, num * product)</span><br></pre></td></tr></table></figure></li>
<li>关键在于 不在return部分做运算</li>
</ul>
<h2 id="列表生成器"><a href="#列表生成器" class="headerlink" title="列表生成器"></a>列表生成器</h2><hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">def fib(max):</span><br><span class="line">    n, a, b &#x3D; 0, 0, 1</span><br><span class="line">    while n &lt; max:</span><br><span class="line">        yield b#运行到此处暂停返回</span><br><span class="line">        a, b &#x3D; b, a + b</span><br><span class="line">        n &#x3D; n + 1</span><br><span class="line">    return &#39;done&#39;#运行到此处终止</span><br><span class="line">f&#x3D;fib(6)</span><br><span class="line">print(next(f))</span><br><span class="line">for n in fib(6):</span><br><span class="line">    print(n)</span><br></pre></td></tr></table></figure>

<h2 id="map对应运行"><a href="#map对应运行" class="headerlink" title="map对应运行"></a>map对应运行</h2><hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; def f(x):</span><br><span class="line">...     return x * x</span><br><span class="line">...</span><br><span class="line">&gt;&gt;&gt; r &#x3D; map(f, [1, 2, 3, 4, 5, 6, 7, 8, 9])</span><br><span class="line">&gt;&gt;&gt; list(r)</span><br><span class="line">[1, 4, 9, 16, 25, 36, 49, 64, 81]</span><br><span class="line">&#39;&#39;&#39;</span><br><span class="line"></span><br><span class="line">&#39;&#39;&#39;reduce迭代运行</span><br><span class="line">&gt;&gt;&gt; from functools import reduce</span><br><span class="line">&gt;&gt;&gt; def fn(x, y):</span><br><span class="line">...     return x * 10 + y</span><br><span class="line">...</span><br><span class="line">&gt;&gt;&gt; reduce(fn, [1, 3, 5, 7, 9])</span><br><span class="line">13579</span><br></pre></td></tr></table></figure>

<h2 id="filter依据筛选"><a href="#filter依据筛选" class="headerlink" title="filter依据筛选"></a>filter依据筛选</h2><hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">def is_odd(n):</span><br><span class="line">    return n % 2 &#x3D;&#x3D; 1</span><br><span class="line"></span><br><span class="line">print(list(filter(is_odd, [1, 2, 4, 5, 6, 9, 10, 15])))</span><br><span class="line"># 结果: [1, 5, 9, 15]</span><br></pre></td></tr></table></figure>

<h2 id="sorted排序"><a href="#sorted排序" class="headerlink" title="sorted排序"></a>sorted排序</h2><hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; sorted([&#39;bob&#39;, &#39;about&#39;, &#39;Zoo&#39;, &#39;Credit&#39;], key&#x3D;str.lower, reverse&#x3D;True)</span><br><span class="line">[&#39;Zoo&#39;, &#39;Credit&#39;, &#39;bob&#39;, &#39;about&#39;]#(tuple,依据函数,正向排列或反向)</span><br></pre></td></tr></table></figure>

<h2 id="zip打包"><a href="#zip打包" class="headerlink" title="zip打包"></a>zip打包</h2><p>该函数在python2与python3中返回值不同</p>
<figure class="highlight plain"><figcaption><span>python2</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt;a &#x3D; [1,2,3]</span><br><span class="line">&gt;&gt;&gt; b &#x3D; [4,5,6]</span><br><span class="line">&gt;&gt;&gt; c &#x3D; [4,5,6,7,8]</span><br><span class="line">&gt;&gt;&gt; zipped &#x3D; zip(a,b)     # 打包为元组的列表</span><br><span class="line">[(1, 4), (2, 5), (3, 6)]</span><br><span class="line">&gt;&gt;&gt; zip(a,c)              # 元素个数与最短的列表一致</span><br><span class="line">[(1, 4), (2, 5), (3, 6)]</span><br><span class="line">&gt;&gt;&gt; zip(*zipped)          # 与 zip 相反，*zipped 可理解为解压，返回二维矩阵式</span><br><span class="line">[(1, 2, 3), (4, 5, 6)]</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><figcaption><span>python3</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt;a &#x3D; [1,2,3]</span><br><span class="line">&gt;&gt;&gt; b &#x3D; [4,5,6]</span><br><span class="line">&gt;&gt;&gt; c &#x3D; [4,5,6,7,8]</span><br><span class="line">&gt;&gt;&gt; zipped &#x3D; zip(a,b)     # 返回一个对象</span><br><span class="line">&gt;&gt;&gt; zipped</span><br><span class="line">&lt;zip object at 0x103abc288&gt;</span><br><span class="line">&gt;&gt;&gt; list(zipped)  # list() 转换为列表</span><br><span class="line">[(1, 4), (2, 5), (3, 6)]</span><br><span class="line">&gt;&gt;&gt; list(zip(a,c))              # 元素个数与最短的列表一致</span><br><span class="line">[(1, 4), (2, 5), (3, 6)]</span><br><span class="line"> </span><br><span class="line">&gt;&gt;&gt; a1, a2 &#x3D; zip(*zip(a,b))          # 与 zip 相反，zip(*) 可理解为解压，返回二维矩阵式</span><br><span class="line">&gt;&gt;&gt; list(a1)</span><br><span class="line">[1, 2, 3]</span><br><span class="line">&gt;&gt;&gt; list(a2)</span><br><span class="line">[4, 5, 6]</span><br><span class="line">&gt;&gt;&gt;</span><br></pre></td></tr></table></figure>

<h2 id="函数作为返回值"><a href="#函数作为返回值" class="headerlink" title="函数作为返回值"></a>函数作为返回值</h2><hr>
<p> 错误示例</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">def count():</span><br><span class="line">    fs &#x3D; []</span><br><span class="line">    for i in range(1, 4):</span><br><span class="line">        def f():</span><br><span class="line">             return i*i</span><br><span class="line">        fs.append(f)</span><br><span class="line">    return fs</span><br><span class="line"></span><br><span class="line">f1, f2, f3 &#x3D; count()#9 9 9</span><br></pre></td></tr></table></figure>
<p> <strong>返回闭包时牢记一点：返回函数不要引用任何循环变量，或者后续会发生变化的变量。</strong><br> 正确示例</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">def count():</span><br><span class="line">    def f(j):</span><br><span class="line">        def g():</span><br><span class="line">            return j*j</span><br><span class="line">        return g</span><br><span class="line">    fs &#x3D; []</span><br><span class="line">    for i in range(1, 4):</span><br><span class="line">        fs.append(f(i)) # f(i)立刻被执行，因此i的当前值被传入f()</span><br><span class="line">    return fs</span><br></pre></td></tr></table></figure>

<h2 id="lambda匿名函数"><a href="#lambda匿名函数" class="headerlink" title="lambda匿名函数"></a>lambda匿名函数</h2><hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; f &#x3D; lambda x: x * x</span><br><span class="line">&gt;&gt;&gt; f</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;function &lt;lambda&gt; at 0x101c6ef28&gt;</span><br><span class="line">&gt;&gt;&gt; f(5)</span><br><span class="line">25</span><br></pre></td></tr></table></figure>

<h2 id="装饰器"><a href="#装饰器" class="headerlink" title="装饰器"></a>装饰器</h2><hr>
<p><code>import functools</code></p>
<ul>
<li>不带参数<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">def log(func):</span><br><span class="line">    @functools.wraps(func)#更改__name__与func一致</span><br><span class="line">    def wrapper(*args, **kw):</span><br><span class="line">        print(&#39;call %s():&#39; % func.__name__)</span><br><span class="line">        return func(*args, **kw)</span><br><span class="line">    return wrapper</span><br><span class="line"></span><br><span class="line">@log#相当于log(now)，引用now()是引用的变为log(now)返回的函数</span><br><span class="line">def now():</span><br><span class="line">    print(&#39;2018&#39;)</span><br><span class="line"></span><br><span class="line">print(now())</span><br></pre></td></tr></table></figure></li>
<li>带参数<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">def log(text):</span><br><span class="line">    def decorator(func):</span><br><span class="line">        @functools.wraps(func)</span><br><span class="line">        def wrapper(*args, **kw):</span><br><span class="line">            print(&#39;%s %s():&#39; % (text, func.__name__))</span><br><span class="line">            return func(*args, **kw)</span><br><span class="line">        return wrapper</span><br><span class="line">    return decorator</span><br><span class="line"></span><br><span class="line">@log(&#39;execute&#39;)</span><br><span class="line">def now():</span><br><span class="line">    print(&#39;2015-3-25&#39;)</span><br><span class="line">#&gt;&gt;&gt; now()</span><br><span class="line">#execute now():</span><br><span class="line">#2015-3-25</span><br><span class="line"></span><br><span class="line">#&gt;&gt;&gt; now &#x3D; log(&#39;execute&#39;)(now)</span><br><span class="line">#首先执行log(&#39;execute&#39;)，返回的是decorator函数，再调用返回的函数，</span><br><span class="line">#参数是now函数，返回值最终是wrapper函数。</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="偏函数"><a href="#偏函数" class="headerlink" title="偏函数"></a>偏函数</h2><hr>
<p> 即修改函数默认值</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; import functools</span><br><span class="line">&gt;&gt;&gt; int2 &#x3D; functools.partial(int, base&#x3D;2)#base默认为10</span><br><span class="line">&gt;&gt;&gt; int2(&#39;1000000&#39;)</span><br><span class="line">64</span><br><span class="line">&gt;&gt;&gt; int2(&#39;1010101&#39;)</span><br><span class="line">85</span><br></pre></td></tr></table></figure>

<h1 id="类与实例"><a href="#类与实例" class="headerlink" title="类与实例"></a>类与实例</h1><h2 id="类的常用内容"><a href="#类的常用内容" class="headerlink" title="类的常用内容"></a>类的常用内容</h2><hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">class Student(object):</span><br><span class="line"></span><br><span class="line">    __slots__&#x3D;(&#39;name&#39;,&#39;age&#39;,&#39;score&#39;)</span><br><span class="line">	    #锁定类属性，可删不可增</span><br><span class="line">		#对子类不起效果,若子类定义__slots__,内容加上父类</span><br><span class="line"></span><br><span class="line">	@property#将方法score变为属性score,设置该属性output</span><br><span class="line">    def score(self):</span><br><span class="line">        return self._score</span><br><span class="line">    @score.setter#设置该属性input</span><br><span class="line">    def score(self, value):</span><br><span class="line">        if not isinstance(value, int):</span><br><span class="line">            raise ValueError(&#39;score must be an integer!&#39;)</span><br><span class="line">        if value &lt; 0 or value &gt; 100:</span><br><span class="line">            raise ValueError(&#39;score must between 0 ~ 100!&#39;)</span><br><span class="line">        self._score &#x3D; value#_score无法被外界访问</span><br><span class="line"></span><br><span class="line">	def __init__(self):</span><br><span class="line">	    pass#初始化</span><br><span class="line">	</span><br><span class="line">	def __str__(self):</span><br><span class="line">	    pass#打印内容print(Student())</span><br><span class="line">		    #对象打印出的字符串（返回给用户）</span><br><span class="line">	</span><br><span class="line">	def __repr__(self):</span><br><span class="line">	    pass#对象打印出的字符串（返回给开发者）</span><br><span class="line">	</span><br><span class="line">	def __iter__(self):</span><br><span class="line">	    pass#使类可迭代，用于for</span><br><span class="line">	def __next__(self):</span><br><span class="line">	    pass#确定类下个迭代结果</span><br><span class="line">		</span><br><span class="line">	def __getitem__(self,n):#使Student()[n]可用</span><br><span class="line">	    if isinstance(n,int):</span><br><span class="line">		    pass</span><br><span class="line">		if isinstance(n,slice):#使Student可以被切片</span><br><span class="line">	        pass#回顾[start,stop,step]</span><br><span class="line">		</span><br><span class="line">	def __getattr__(self,attr):#当调用不存在的属性时，在此处寻找对应输出</span><br><span class="line">	    if attr&#x3D;&#x3D;&#39;parent&#39;</span><br><span class="line">		    return True#返回自定义</span><br><span class="line">	    raise AttributeError(&#39;\&#39;Student\&#39; object has no attribute \&#39;%s\&#39;&#39; % attr)</span><br><span class="line">		#若无上句，意外输入不报错，返回None</span><br><span class="line"></span><br><span class="line">	def __call__(self):</span><br><span class="line">	    pass#变为callable对象(可调用)，重载（）</span><br><span class="line">	#class Student(object):</span><br><span class="line">    #def __init__(self, name):</span><br><span class="line">    #    self.name &#x3D; name</span><br><span class="line"></span><br><span class="line">    #def __call__(self):</span><br><span class="line">    #    print(&#39;My name is %s.&#39; % self.name)</span><br><span class="line">	#&gt;&gt;&gt; s &#x3D; Student(&#39;Michael&#39;)</span><br><span class="line">    #&gt;&gt;&gt; s() # self参数不要传入</span><br><span class="line">    #My name is Michael.</span><br></pre></td></tr></table></figure>

<h2 id="枚举类"><a href="#枚举类" class="headerlink" title="枚举类"></a>枚举类</h2><hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">from enum import Enum</span><br><span class="line">Month&#x3D;Enum(&#39;Month1&#39;,(&#39;Jan&#39;,&#39;Feb&#39;,&#39;Mar&#39;))</span><br><span class="line">for name,member in Month.__members__.items():</span><br><span class="line">    print(name,&#39;&#x3D;&gt;&#39;,member,&#39;,&#39;,member.value)</span><br><span class="line">#value自动给成员赋值 初始1</span><br></pre></td></tr></table></figure>

<h2 id="元类"><a href="#元类" class="headerlink" title="元类"></a>元类</h2><hr>
<ul>
<li><p><strong>class 创建类型的本质是使用了type()函数</strong>，因此，下面两个代码是等价的。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">class Hello(object):</span><br><span class="line">    def hello(self,name&#x3D;&#39;world&#39;):</span><br><span class="line">        print(&#39;Hello,%s&#39; % name)</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt;def fn(self,name&#x3D;&#39;world&#39;):</span><br><span class="line">...    print(&#39;Hello,%s&#39; % name)</span><br><span class="line">&gt;&gt;&gt;Hello &#x3D; type(&#39;Hello&#39;,(object),dict(hello&#x3D;fn))</span><br></pre></td></tr></table></figure>
<p>type函数的三个参数为class名称、父类集合、方法名字与函数对应</p>
</li>
<li><p>元类可以规定如何去创造一个新类，只要被创造的类中引用了元类<br>例如 定义元类往往在名称后用Metaclass后缀标明其为元类</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">class ListMetaclass(type):</span><br><span class="line">    def __new__(cls,name,bases,attrs):</span><br><span class="line">        attrs[&#39;add&#39;] &#x3D; lambda self,value:self.append(value)</span><br><span class="line">        return type.__new__(cls,name,bases,attrs)</span><br><span class="line"></span><br><span class="line">class Mylist(list,metaclass&#x3D;ListMetaclass):</span><br><span class="line">    pass</span><br></pre></td></tr></table></figure>
<p><code>__new__</code>规定了如何创造Mylist这一新类 新类拥有add方法</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; L &#x3D; MyList()</span><br><span class="line">&gt;&gt;&gt; L.add(1)</span><br><span class="line">&gt;&gt;&gt; L</span><br><span class="line">#[1]</span><br></pre></td></tr></table></figure>
<p><code>__new__</code>接收的四个参数是 准备创建的类的对象 类的名字 类的父类集合 类的方法集合</p>
</li>
</ul>
<h1 id="调试"><a href="#调试" class="headerlink" title="调试"></a>调试</h1><h2 id="try"><a href="#try" class="headerlink" title="try"></a>try</h2><hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">try:</span><br><span class="line">except:</span><br><span class="line">finally:</span><br></pre></td></tr></table></figure>

<h2 id="断言-assert"><a href="#断言-assert" class="headerlink" title="断言(assert)"></a>断言(assert)</h2><hr>
<p>assert 表达式,’若表达式为假报错信息’<br>python -o new1.py中 -o 可以关闭assert</p>
<h2 id="logging"><a href="#logging" class="headerlink" title="logging"></a>logging</h2><hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">import logging</span><br><span class="line">#logging.basicConfig(level&#x3D;logging.INFO,</span><br><span class="line">#                    format&#x3D;&#39;%(asctime)s - %(filename)s[line:%(lineno)d] - %(levelname)s: %(message)s&#39;</span><br><span class="line">#	                filename&#x3D;&#39;.&#x2F;new1log.txt&#39;</span><br><span class="line">#					filemode&#x3D;&#39;w&#39;)#如不加文件参数，为命令行输出</span><br><span class="line">#警报分为五级DEDBUG,INFO,WARNING,ERROR,CRITICAL</span><br><span class="line"></span><br><span class="line">#即把日志输出到控制台又写入日志</span><br><span class="line"># 第一步，创建一个logger  </span><br><span class="line">logger &#x3D; logging.getLogger(__name__)#logger的对象名称</span><br><span class="line">#若对象名称存在继承关系(如&quot;root.c1&quot;)，设置将被继承</span><br><span class="line">logger.setLevel(logging.INFO)    # Log等级总开关  </span><br><span class="line">  </span><br><span class="line"># 第二步，创建一个handler，用于写入日志文件  </span><br><span class="line">logfile &#x3D; &#39;.&#x2F;new1log.txt&#39;  </span><br><span class="line">fh &#x3D; logging.FileHandler(logfile, mode&#x3D;&#39;w&#39;)  </span><br><span class="line">fh.setLevel(logging.DEBUG)   # 输出到file的log等级的开关  </span><br><span class="line">  </span><br><span class="line"># 第三步，再创建一个handler，用于输出到控制台  </span><br><span class="line">ch &#x3D; logging.StreamHandler()  </span><br><span class="line">ch.setLevel(logging.WARNING)   # 输出到console的log等级的开关  </span><br><span class="line">  </span><br><span class="line"># 第四步，定义handler的输出格式  </span><br><span class="line">formatter &#x3D; logging.Formatter(&quot;%(asctime)s - %(filename)s[line:%(lineno)d] - %(levelname)s: %(message)s&quot;)  </span><br><span class="line">fh.setFormatter(formatter)  </span><br><span class="line">ch.setFormatter(formatter)  </span><br><span class="line">  </span><br><span class="line"># 第五步，将logger添加到handler里面  </span><br><span class="line">logger.addHandler(fh)  </span><br><span class="line">logger.addHandler(ch)  </span><br><span class="line">  </span><br><span class="line"># 日志内容  </span><br><span class="line">logger.debug(&#39;this is a logger debug message&#39;)  </span><br><span class="line">logger.info(&#39;this is a logger info message&#39;)  </span><br><span class="line">logger.warning(&#39;this is a logger warning message&#39;)  </span><br><span class="line">logger.error(&#39;this is a logger error message&#39;)  </span><br><span class="line">logger.critical(&#39;this is a logger critical message&#39;)</span><br><span class="line"></span><br><span class="line">#formatter内可用格式</span><br><span class="line">#%(levelno)s: 打印日志级别的数值</span><br><span class="line">#%(levelname)s: 打印日志级别名称</span><br><span class="line">#%(pathname)s: 打印当前执行程序的路径，其实就是sys.argv[0]</span><br><span class="line">#%(filename)s: 打印当前执行程序名</span><br><span class="line">#%(funcName)s: 打印日志的当前函数</span><br><span class="line">#%(lineno)d: 打印日志的当前行号</span><br><span class="line">#%(asctime)s: 打印日志的时间</span><br><span class="line">#%(thread)d: 打印线程ID</span><br><span class="line">#%(threadName)s: 打印线程名称</span><br><span class="line">#%(process)d: 打印进程ID</span><br><span class="line">#%(message)s: 打印日志信息</span><br></pre></td></tr></table></figure>
<p>其余用法大全见 <a href="https://blog.csdn.net/caimouse/article/details/51780444" target="_blank" rel="noopener">https://blog.csdn.net/caimouse/article/details/51780444</a></p>
<h2 id="pdb"><a href="#pdb" class="headerlink" title="pdb"></a>pdb</h2><hr>
<p>一种使用命令台进行逐步调试的方法<br><code>$python -m pdb new1.py</code><br>l查看代码<br>n单步执行<br>p 变量名 查看变量<br>q结束调试</p>
<p>pdb.set_trace()是一种自动运行到设定点的断点设置法<br>假设new1.py内容如下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">import pdb</span><br><span class="line">s &#x3D; &#39;0&#39;</span><br><span class="line">n &#x3D; int(s)</span><br><span class="line">pdb.set_trace() # 运行到这里会自动暂停</span><br><span class="line">print(10 &#x2F; n)</span><br></pre></td></tr></table></figure>
<p>以下使用控制台进行操作</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$python new1.py</span><br><span class="line">$p 变量名 查看变量</span><br><span class="line">$c 继续运行</span><br></pre></td></tr></table></figure>

<p><strong><em>logging才是调试的王道</em></strong></p>
<h1 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h1><h2 id="单元测试"><a href="#单元测试" class="headerlink" title="单元测试"></a>单元测试</h2><hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">#这里自定义了一个Dict，这是不被推荐的</span><br><span class="line">class Dict(dict):</span><br><span class="line"></span><br><span class="line">    def __init__(self, **kw):</span><br><span class="line">        super().__init__(**kw)</span><br><span class="line"></span><br><span class="line">    def __getattr__(self, key):</span><br><span class="line">        try:</span><br><span class="line">            return self[key]</span><br><span class="line">        except KeyError:</span><br><span class="line">            raise AttributeError(r&quot;&#39;Dict&#39; object has no attribute &#39;%s&#39;&quot; % key)</span><br><span class="line"></span><br><span class="line">    def __setattr__(self, key, value):</span><br><span class="line">        self[key] &#x3D; value</span><br><span class="line">#以下为测试新dict性能的代码，即单元测试</span><br><span class="line">import unittest</span><br><span class="line">class TestDict(unittest.TestCase):#测试类的父类</span><br><span class="line">#不以test为头的方法不会被验证</span><br><span class="line">    def test_init(self):</span><br><span class="line">        d &#x3D; Dict(a&#x3D;1, b&#x3D;&#39;test&#39;)</span><br><span class="line">        self.assertEqual(d.a, 1)#断言相等</span><br><span class="line">        self.assertEqual(d.b, &#39;test&#39;)</span><br><span class="line">        self.assertTrue(isinstance(d, dict))#断言为真</span><br><span class="line"></span><br><span class="line">    def test_key(self):</span><br><span class="line">        d &#x3D; Dict()</span><br><span class="line">        d[&#39;key&#39;] &#x3D; &#39;value&#39;</span><br><span class="line">        self.assertEqual(d.key, &#39;value&#39;)</span><br><span class="line"></span><br><span class="line">    def test_attr(self):</span><br><span class="line">        d &#x3D; Dict()</span><br><span class="line">        d.key &#x3D; &#39;value&#39;</span><br><span class="line">        self.assertTrue(&#39;key&#39; in d)</span><br><span class="line">        self.assertEqual(d[&#39;key&#39;], &#39;value&#39;)</span><br><span class="line"></span><br><span class="line">    def test_keyerror(self):</span><br><span class="line">        d &#x3D; Dict()</span><br><span class="line">        with self.assertRaises(KeyError):#断言抛错</span><br><span class="line">            value &#x3D; d[&#39;empty&#39;]</span><br><span class="line"></span><br><span class="line">    def test_attrerror(self):</span><br><span class="line">        d &#x3D; Dict()</span><br><span class="line">        with self.assertRaises(AttributeError):</span><br><span class="line">            value &#x3D; d.empty</span><br><span class="line">			</span><br><span class="line">	def setUP(self):</span><br><span class="line">	    pass</span><br><span class="line">	#setUP定义测试开始前做的准备，比如打开数据库，tearDown收尾</span><br><span class="line">	def tearDown(self):</span><br><span class="line">	    pass</span><br><span class="line">#以下为使单元测试运行</span><br><span class="line">if __name__ &#x3D;&#x3D; &#39;__main__&#39;:</span><br><span class="line">    unittest.main()</span><br><span class="line">#但是推荐使用命令行参数运行</span><br><span class="line">#$ python -m unittest new1.py</span><br></pre></td></tr></table></figure>

<h2 id="文档测试"><a href="#文档测试" class="headerlink" title="文档测试"></a>文档测试</h2><hr>
<p>使用注释测试 doctest</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">class Dict(dict):</span><br><span class="line">    &#39;&#39;&#39;</span><br><span class="line">    Simple dict but also support access as x.y style</span><br><span class="line"></span><br><span class="line">    &gt;&gt;&gt; d1 &#x3D; Dict()</span><br><span class="line">    &gt;&gt;&gt; d1[&#39;x&#39;] &#x3D; 100</span><br><span class="line">    &gt;&gt;&gt; d1.x</span><br><span class="line">    100</span><br><span class="line">    &gt;&gt;&gt; d1.y &#x3D; 200</span><br><span class="line">    &gt;&gt;&gt; d1[&#39;y&#39;]</span><br><span class="line">    200</span><br><span class="line">    &gt;&gt;&gt; d2 &#x3D; Dict(a&#x3D;1, b&#x3D;2, c&#x3D;&#39;3&#39;)</span><br><span class="line">    &gt;&gt;&gt; d2.c</span><br><span class="line">    &#39;3&#39;</span><br><span class="line">    &gt;&gt;&gt; d2[&#39;empty&#39;]</span><br><span class="line">    Traceback (most recent call last):</span><br><span class="line">        ...</span><br><span class="line">    KeyError: &#39;empty&#39;</span><br><span class="line">    &gt;&gt;&gt; d2.empty</span><br><span class="line">    Traceback (most recent call last):</span><br><span class="line">        ...</span><br><span class="line">    AttributeError: &#39;Dict&#39; object has no attribute &#39;empty&#39;</span><br><span class="line">    &#39;&#39;&#39;</span><br><span class="line">    def __init__(self,**kw):</span><br><span class="line">	    super(Dict,self).__init__(**kw)</span><br><span class="line">        #等价代码dict.__init__(self) 作用继承父类初始化</span><br><span class="line">    def __getattr__(self,key):</span><br><span class="line">	    try:</span><br><span class="line">		    return self[key]</span><br><span class="line">	    except KeyError:</span><br><span class="line">		    raise AttributeError(r&quot;&#39;Dict&#39; object has no attribute &#39;%s&#39;&quot; % key)</span><br><span class="line"></span><br><span class="line">    def __setattr__(self,key,value):</span><br><span class="line">	    self[key] &#x3D; value</span><br><span class="line">if __name__&#x3D;&#x3D;&#39;__main__&#39;:</span><br><span class="line">    import doctest</span><br><span class="line">    doctest.testmod(verbose&#x3D;False)</span><br><span class="line">#verbose在从测试时输出测试结果，若为false，只在失败时输出测试结果，默认为false</span><br><span class="line">#dotest可以编译被注释代码，并映照是否相同</span><br><span class="line">#__name__为当前路径，此语句可以保证dotest只在直接运行时被使用，而当他被作为模引用时不会被使用</span><br></pre></td></tr></table></figure>

<h1 id="文件IO"><a href="#文件IO" class="headerlink" title="文件IO"></a>文件IO</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">with open(&#39;D:&#x2F;&#x2F;new1.txt&#39;,&#39;a&#39;,encoding&#x3D;&#39;gbk&#39;,errors&#x3D;(&#39;ignore&#39;)) as f:</span><br><span class="line">    f.write(&#39;333&#39;)</span><br><span class="line">#r,w,a:追加写入,rb:16进制</span><br></pre></td></tr></table></figure>
<p> 另一种写法</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">try:</span><br><span class="line">    g&#x3D;open(&#39;D:&#x2F;&#x2F;new1.py&#39;,&#39;r&#39;,encoding&#x3D;&#39;gbk&#39;,errors&#x3D;&#39;ignore&#39;)</span><br><span class="line">    print(g.read())</span><br><span class="line">finally:</span><br><span class="line">    if g:</span><br><span class="line">	    g.close</span><br><span class="line">#read(size):limitsize read</span><br><span class="line">#readline:read a line</span><br><span class="line">#readlines:read as line and return list</span><br></pre></td></tr></table></figure>

<h1 id="内存-string-IO内存读写"><a href="#内存-string-IO内存读写" class="headerlink" title="内存(string)IO内存读写"></a>内存(string)IO内存读写</h1><h2 id="write"><a href="#write" class="headerlink" title="write"></a>write</h2><hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">from io import StringIO</span><br><span class="line">f &#x3D; StringIO()</span><br><span class="line">f.write(&#39;hello&#39;)</span><br><span class="line">#5</span><br><span class="line">f.write(&#39; &#39;)</span><br><span class="line">#1</span><br><span class="line">f.write(&#39;world!&#39;)</span><br><span class="line">#6</span><br><span class="line">print(f.getvalue())</span><br><span class="line">#hello world!</span><br></pre></td></tr></table></figure>
<h2 id="read"><a href="#read" class="headerlink" title="read"></a>read</h2><hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">from io import StringIO</span><br><span class="line">f &#x3D; StringIO(&#39;Hello!\nHi!\nGoodbye!&#39;)</span><br><span class="line">while True:</span><br><span class="line">    s &#x3D; f.readline()</span><br><span class="line">    if s &#x3D;&#x3D; &#39;&#39;:</span><br><span class="line">        break</span><br><span class="line">    print(s.strip())</span><br><span class="line">#Hello!</span><br><span class="line">#Hi!</span><br><span class="line">#Goodbye!</span><br></pre></td></tr></table></figure>

<h2 id="二进制bytesIO操作"><a href="#二进制bytesIO操作" class="headerlink" title="二进制bytesIO操作"></a>二进制bytesIO操作</h2><hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">from io import BytesIO</span><br><span class="line">f &#x3D; BytesIO()</span><br><span class="line">f.write(&#39;中文&#39;.encode(&#39;utf-8&#39;))</span><br><span class="line">#6</span><br><span class="line">print(f.getvalue())</span><br><span class="line">#b&#39;\xe4\xb8\xad\xe6\x96\x87&#39;</span><br></pre></td></tr></table></figure>

<h1 id="文件操作"><a href="#文件操作" class="headerlink" title="文件操作"></a>文件操作</h1><p>import os #文件的简单操作<br>import shutil #文件的高级操作<br>#print(help(os)) #查看用法</p>
<p>file_dir = “D:\“ #注意 \ ；windows 下是这么表示的；Linux 和 Mac 是 /<br>file_name = “new1.txt”<br>file_abs = os.path.join(file_dir, file_name)          #os.path.join(…) 表示路径链接</p>
<h2 id="判断路径或文件即分割函数"><a href="#判断路径或文件即分割函数" class="headerlink" title="判断路径或文件即分割函数"></a>判断路径或文件即分割函数</h2><hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">print (1,os.path.isabs(file_dir))                     # 判断是否绝对路径</span><br><span class="line">print (2,os.path.isabs(file_name))                     </span><br><span class="line">print (3,os.path.isabs(file_abs))                      </span><br><span class="line">print (4,os.path.exists(file_abs))                    # 判断是否真实存在</span><br><span class="line">print (5,os.path.exists(os.path.join(file_dir,&quot;xxx&quot;)))</span><br><span class="line">print (6,os.path.isdir(file_dir))                     # 判断是否是个目录</span><br><span class="line">print (7,os.path.isdir(file_abs))       </span><br><span class="line">print (8,os.path.isfile(file_dir))                    # 判断是否是个文件</span><br><span class="line">print (9,os.path.isfile(file_abs))    </span><br><span class="line"></span><br><span class="line">print(10,os.path.split(file_abs))                     #分割为dir与name</span><br><span class="line">print(11,os.path.splitext(file_abs))                  #分割出后缀名</span><br><span class="line">print(12,os.path.splitdrive(file_abs))                #分割出盘符</span><br></pre></td></tr></table></figure>

<h2 id="目录更改及文件夹的创造"><a href="#目录更改及文件夹的创造" class="headerlink" title="目录更改及文件夹的创造"></a>目录更改及文件夹的创造</h2><hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">print (os.getcwd())                # 获取当前工作目录</span><br><span class="line">os.chdir(file_dir)                 # 改变工作目录</span><br><span class="line">print (os.getcwd())    </span><br><span class="line">print (os.listdir(file_dir))       # 列出当前工作目录的所有文件</span><br><span class="line">os.mkdir(&quot;test_mkdir&quot;)             # 在当前工作目录下创建文件夹 test_mkdir；注意不可存在相同文件夹，不然会报错</span><br><span class="line">os.makedirs(&quot;test_mkdir\\test1&quot;)</span><br><span class="line">os.chdir(&quot;.\\test_mkdir&quot;)          # . 表示本级目录； .. 表示上级目录</span><br><span class="line">print (os.getcwd())    </span><br><span class="line">for i in range(2,6):               # 使用for循环等，可方便的创建多个文件夹</span><br><span class="line">    dir_name &#x3D; &quot;test&quot; + str(i)</span><br><span class="line">    os.mkdir(dir_name)</span><br></pre></td></tr></table></figure>

<h2 id="文件夹的删除"><a href="#文件夹的删除" class="headerlink" title="文件夹的删除"></a>文件夹的删除</h2><hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">#os.rmdir(...)# 删除空文件夹注意：必须为空文件夹  如需删除文件夹及其下所有文件，需用 shutil</span><br><span class="line">#os.remove(...)# 删除单一文件</span><br><span class="line">#shutil.rmtree(...)# 删除文件夹及其下所有文件</span><br><span class="line">os.chdir(file_dir+&quot;\\test_mkdir&quot;)            </span><br><span class="line">print(os.getcwd())                            # 确保当前工作目录</span><br><span class="line">print(os.listdir(os.getcwd()))                # 查看当前文件夹下所有文件    </span><br><span class="line">os.rmdir(&quot;test1&quot;)                             # 删除 test1 文件夹（空文件夹）</span><br><span class="line">print(os.listdir(os.getcwd()))    </span><br><span class="line">os.chdir(&quot;..\\&quot;)</span><br><span class="line">print(os.getcwd())                            # 切换到上级目录</span><br><span class="line">print(os.listdir(os.getcwd()))</span><br><span class="line">shutil.rmtree(&quot;test_mkdir&quot;)                   # 删除 test_mkdir 及其下所有文件</span><br></pre></td></tr></table></figure>

<h2 id="文件、文件夹的重命名"><a href="#文件、文件夹的重命名" class="headerlink" title="文件、文件夹的重命名"></a>文件、文件夹的重命名</h2><hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">os.chdir(file_dir)</span><br><span class="line">os.rename(&quot;new1.txt&quot;,&quot;new.txt&quot;)</span><br><span class="line">os.rename(&#39;new.txt&#39;,&#39;new1.txt&#39;)</span><br></pre></td></tr></table></figure>

<h2 id="文件、文件夹的复制与移动"><a href="#文件、文件夹的复制与移动" class="headerlink" title="文件、文件夹的复制与移动"></a>文件、文件夹的复制与移动</h2><hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">shutil.copyfile(&quot;old&quot;,&quot;new&quot;)# 复制文件，都只能是文件</span><br><span class="line">shutil.copytree(&quot;old&quot;,&quot;new&quot;)# 复制文件夹，都只能是目录，且new必须不存在</span><br><span class="line">shutil.copy(&quot;old&quot;,&quot;new&quot;)    # 复制文件&#x2F;文件夹，复制 old 为 new（new是文件，若不存在，即新建），复制 old 为至 new 文件夹（文件夹已存在）</span><br><span class="line">shutil.move(&quot;old&quot;,&quot;new&quot;)    # 移动文件&#x2F;文件夹至 new 文件夹中</span><br></pre></td></tr></table></figure>

<h1 id="序列化-pickling"><a href="#序列化-pickling" class="headerlink" title="序列化(pickling)"></a>序列化(pickling)</h1><p>也就是将内存写入文件<br>下面以如下代码为前提</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">import pickle</span><br><span class="line">d&#x3D;dict(name&#x3D;&#39;Bob&#39;,age&#x3D;20,score&#x3D;88)</span><br></pre></td></tr></table></figure>

<h2 id="基础序列化"><a href="#基础序列化" class="headerlink" title="基础序列化"></a>基础序列化</h2><hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">pickle.dumps(d)#将任意对象序列化到内存</span><br><span class="line">f&#x3D;open(&#39;new1.txt&#39;,&#39;wb&#39;)</span><br><span class="line">pickle.dump(d,f)#序列化到文件，(发现乱码)因为是python保存的对象内部信息</span><br><span class="line">f.close()</span><br><span class="line"></span><br><span class="line">f&#x3D;open(&#39;new1.txt&#39;,&#39;rb&#39;)</span><br><span class="line">d&#x3D;pickle.load(f)#反序列化</span><br><span class="line">f.close()</span><br><span class="line">print(d)</span><br><span class="line"></span><br><span class="line">#如果想跨编程语言保存信息，可以序列化为JSON</span><br><span class="line">import json</span><br><span class="line">print(json.dumps(d))#json返回str</span><br><span class="line">print(json.loads(json.dumps(d)))</span><br></pre></td></tr></table></figure>

<h2 id="class序列化"><a href="#class序列化" class="headerlink" title="class序列化"></a>class序列化</h2><hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">import json</span><br><span class="line">class Student(object):</span><br><span class="line">    def __init__(self, name, age, score):</span><br><span class="line">        self.name &#x3D; name</span><br><span class="line">        self.age &#x3D; age</span><br><span class="line">        self.score &#x3D; score</span><br><span class="line"></span><br><span class="line">    def __dict__(std):</span><br><span class="line">        return &#123;</span><br><span class="line">            &#39;name&#39;: std.name,</span><br><span class="line">            &#39;age&#39;: std.age,</span><br><span class="line">            &#39;score&#39;: std.score</span><br><span class="line">        &#125;</span><br><span class="line">def dict2student(d):</span><br><span class="line">    return Student(d[&#39;name&#39;], d[&#39;age&#39;], d[&#39;score&#39;])</span><br><span class="line"></span><br><span class="line">print(json.dumps(d, default&#x3D;lambda obj: obj.__dict__))</span><br><span class="line">#default提供了转化方法</span><br><span class="line">json_str &#x3D; &#39;&#123;&quot;age&quot;: 20, &quot;score&quot;: 88, &quot;name&quot;: &quot;Bob&quot;&#125;&#39;</span><br><span class="line">print(json.loads(json_str, object_hook&#x3D;dict2student))</span><br><span class="line">#object_hook提供转化方法</span><br></pre></td></tr></table></figure>

<h1 id="多进程"><a href="#多进程" class="headerlink" title="多进程"></a>多进程</h1><p>from multiprocessing import Process,Queue,Pool<br>import os,time,random<br>import subprocess</p>
<h2 id="简单进程启动"><a href="#简单进程启动" class="headerlink" title="简单进程启动"></a>简单进程启动</h2><hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">def run_proc(name):</span><br><span class="line">    print(&#39;Run child process %s (%s)...&#39; % (name, os.getpid()))</span><br><span class="line"></span><br><span class="line">if __name__&#x3D;&#x3D;&#39;__main__&#39;:</span><br><span class="line">    print(&#39;Parent process %s.&#39; % os.getpid())#获得父进程</span><br><span class="line">    p &#x3D; Process(target&#x3D;run_proc, args&#x3D;(&#39;test&#39;,))#传入执行函数与函数参数</span><br><span class="line">    print(&#39;Child process will start.&#39;)</span><br><span class="line">    p.start()#启动进程</span><br><span class="line">    p.join()#等待所有子进程结束后再结束主进程</span><br><span class="line">	#join的timeout参数：主进程等待时间</span><br><span class="line">    print(&#39;Child process end.&#39;)</span><br></pre></td></tr></table></figure>

<h2 id="用进程池批量创造子进程"><a href="#用进程池批量创造子进程" class="headerlink" title="用进程池批量创造子进程"></a>用进程池批量创造子进程</h2><hr>
<p>参见 <a href="https://www.cnblogs.com/Tour/p/4564710.html" target="_blank" rel="noopener">https://www.cnblogs.com/Tour/p/4564710.html</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">def long_time_task(name):</span><br><span class="line">    print(&#39;Run task %s (%s)...&#39; % (name, os.getpid()))</span><br><span class="line">    start &#x3D; time.time()#返回当前时间戳</span><br><span class="line">    time.sleep(random.random() * 3)#推迟线程运行时间，random生成0-1的浮点数</span><br><span class="line">    end &#x3D; time.time()</span><br><span class="line">    print(&#39;Task %s runs %0.2f seconds.&#39; % (name, (end - start)))</span><br><span class="line"></span><br><span class="line">if __name__&#x3D;&#x3D;&#39;__main__&#39;:</span><br><span class="line">    print(&#39;Parent process %s.&#39; % os.getpid())</span><br><span class="line">    p &#x3D; Pool(4)</span><br><span class="line">	#Pool(processes&#x3D;None, initializer&#x3D;None, initargs&#x3D;(), maxtasksperchild&#x3D;None)</span><br><span class="line">    #Returns a process pool object</span><br><span class="line">    #processes表示工作进程的个数，默认为None，表示worker进程数为cpu_count()</span><br><span class="line">    #initializer表示工作进程start时调用的初始化函数，initargs表示initializer函数的参数，如果initializer不为None，在每个工作进程start之前会调用initializer(*initargs)</span><br><span class="line">    #maxtaskperchild表示每个工作进程在退出&#x2F;被其他新的进程替代前，需要完成的工作任务数，默认为None，表示工作进程存活时间与pool相同，即不会自动退出&#x2F;被替换。</span><br><span class="line">    #函数返回一个进程池（Pool）对象</span><br><span class="line">    for i in range(5):</span><br><span class="line">        p.apply_async(long_time_task, args&#x3D;(i,))#创建任务</span><br><span class="line">    print(&#39;Waiting for all subprocesses done...&#39;)</span><br><span class="line">    p.close()</span><br><span class="line">    p.join()</span><br><span class="line">    print(&#39;All subprocesses done.&#39;)</span><br></pre></td></tr></table></figure>

<h2 id="外部子进程输入输出"><a href="#外部子进程输入输出" class="headerlink" title="外部子进程输入输出"></a>外部子进程输入输出</h2><hr>
<ul>
<li>简单启动<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">print(&#39;$ nslookup www.python.org&#39;)</span><br><span class="line">r &#x3D; subprocess.call([&#39;nslookup&#39;, &#39;www.python.org&#39;])#执行命令行任务</span><br><span class="line">print(&#39;Exit code:&#39;, r)</span><br></pre></td></tr></table></figure></li>
<li>带输入的子进程<br>Popen与PIPE理解 <a href="https://blog.csdn.net/xumingwei12345/article/details/51941183" target="_blank" rel="noopener">https://blog.csdn.net/xumingwei12345/article/details/51941183</a><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">print(&#39;$ nslookup&#39;)</span><br><span class="line">p &#x3D; subprocess.Popen([&#39;nslookup&#39;], stdin&#x3D;subprocess.PIPE, stdout&#x3D;subprocess.PIPE, stderr&#x3D;subprocess.PIPE)</span><br><span class="line">output, err &#x3D; p.communicate(b&#39;set q&#x3D;mx\npython.org\nexit\n&#39;)#返回输出与错误</span><br><span class="line">print(output.decode(&#39;utf-8&#39;, errors&#x3D;&#39;ignore&#39;))</span><br><span class="line">print(&#39;Exit code:&#39;, p.returncode)#https:&#x2F;&#x2F;www.cnblogs.com&#x2F;Security-Darren&#x2F;p&#x2F;4733368.html</span><br></pre></td></tr></table></figure>
上面的代码相当于在命令行执行命令nslookup，然后手动输入：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">set q&#x3D;mx</span><br><span class="line">python.org</span><br><span class="line">exit</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="附带调用系统命令"><a href="#附带调用系统命令" class="headerlink" title="附带调用系统命令"></a>附带调用系统命令</h2><hr>
<p><a href="https://www.cnblogs.com/iszero/p/3843008.html" target="_blank" rel="noopener">https://www.cnblogs.com/iszero/p/3843008.html</a></p>
<h2 id="进程间通信"><a href="#进程间通信" class="headerlink" title="进程间通信"></a>进程间通信</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"># 写数据进程执行的代码:</span><br><span class="line">def write(q):</span><br><span class="line">    print(&#39;Process to write: %s&#39; % os.getpid())</span><br><span class="line">    for value in [&#39;A&#39;, &#39;B&#39;, &#39;C&#39;]:</span><br><span class="line">        print(&#39;Put %s to queue...&#39; % value)</span><br><span class="line">        q.put(value)</span><br><span class="line">        time.sleep(random.random())</span><br><span class="line"></span><br><span class="line"># 读数据进程执行的代码:</span><br><span class="line">def read(q):</span><br><span class="line">    print(&#39;Process to read: %s&#39; % os.getpid())</span><br><span class="line">    while True:</span><br><span class="line">        value &#x3D; q.get(True)#可选参数为block，默认为True。如果队列为空且block为True，get()就使调用线程暂停，直至有项目可用。如果队列为空且block为False，队列将引发Empty异常。</span><br><span class="line">        print(&#39;Get %s from queue.&#39; % value)</span><br><span class="line"></span><br><span class="line">if __name__&#x3D;&#x3D;&#39;__main__&#39;:</span><br><span class="line">    # 父进程创建Queue，并传给各个子进程：</span><br><span class="line">    q &#x3D; Queue()</span><br><span class="line">    pw &#x3D; Process(target&#x3D;write, args&#x3D;(q,))</span><br><span class="line">    pr &#x3D; Process(target&#x3D;read, args&#x3D;(q,))</span><br><span class="line">    # 启动子进程pw，写入:</span><br><span class="line">    pw.start()</span><br><span class="line">    # 启动子进程pr，读取:</span><br><span class="line">    pr.start()</span><br><span class="line">    # 等待pw结束:</span><br><span class="line">    pw.join()</span><br><span class="line">    # pr进程里是死循环，无法等待其结束，只能强行终止:</span><br><span class="line">    pr.terminate()</span><br></pre></td></tr></table></figure>

<h1 id="多线程"><a href="#多线程" class="headerlink" title="多线程"></a>多线程</h1><p><strong>import time,threading</strong></p>
<h2 id="简单启动"><a href="#简单启动" class="headerlink" title="简单启动"></a>简单启动</h2><hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">def loop():</span><br><span class="line">    print(&#39;thread %s is running...&#39; % threading.current_thread().name)</span><br><span class="line">    n&#x3D;0#current_thread返回当前线程的实例</span><br><span class="line">    while n&lt;5:</span><br><span class="line">        n&#x3D;n+1</span><br><span class="line">        print(&#39;thread %s &gt;&gt;&gt; %s&#39; % (threading.current_thread().name,n))</span><br><span class="line">        time.sleep(1)</span><br><span class="line">        print(&#39;thread %s ended&#39; % threading.current_thread().name)</span><br><span class="line"></span><br><span class="line">print(&#39;thread %s is running...&#39; % threading.current_thread().name)</span><br><span class="line">t&#x3D;threading.Thread(target&#x3D;loop,name&#x3D;&#39;LoopThread&#39;)</span><br><span class="line">t.start()</span><br><span class="line">t.join()</span><br><span class="line">print(&#39;thread %s ended&#39; % threading.current_thread().name)</span><br></pre></td></tr></table></figure>

<h2 id="threading-Lock-线程锁"><a href="#threading-Lock-线程锁" class="headerlink" title="threading.Lock()线程锁"></a>threading.Lock()线程锁</h2><p>多线程内变量共享，为防止意外修改，当对一个变量进行修改时应让他对于其他线程而言被锁，修改结束后解锁<br>多个线程对同一变量要求修改时，会依次获得与释放锁，因此必须记得释放锁，用try finally</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">balance &#x3D; 0</span><br><span class="line">lock &#x3D; threading.Lock()#lock是一把锁，只能同时被锁一次</span><br><span class="line"></span><br><span class="line">def change_it(n):</span><br><span class="line">    # 先存后取，结果应该为0:</span><br><span class="line">    global balance#声明balance为全局变量</span><br><span class="line">    balance &#x3D; balance + n</span><br><span class="line">    balance &#x3D; balance - n</span><br><span class="line"></span><br><span class="line">def run_thread(n):</span><br><span class="line">    for i in range(100000):</span><br><span class="line">        # 先要获取锁:</span><br><span class="line">        lock.acquire()</span><br><span class="line">        try:</span><br><span class="line">            # 放心地改吧:</span><br><span class="line">            change_it(n)</span><br><span class="line">        finally:</span><br><span class="line">            # 改完了一定要释放锁:</span><br><span class="line">            lock.release()</span><br><span class="line"></span><br><span class="line">t1 &#x3D; threading.Thread(target&#x3D;run_thread, args&#x3D;(5,))</span><br><span class="line">t2 &#x3D; threading.Thread(target&#x3D;run_thread, args&#x3D;(8,))</span><br><span class="line">t1.start()</span><br><span class="line">t2.start()</span><br><span class="line">t1.join()</span><br><span class="line">t2.join()</span><br><span class="line">print(balance)</span><br></pre></td></tr></table></figure>

<h2 id="ThreadLocal各线程局部变量的全局传递实现"><a href="#ThreadLocal各线程局部变量的全局传递实现" class="headerlink" title="ThreadLocal各线程局部变量的全局传递实现"></a>ThreadLocal各线程局部变量的全局传递实现</h2><hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">local_school &#x3D; threading.local()</span><br><span class="line">#可以把local_school看成全局变量，但每个属性如local_school.student都是线程的局部变量，可以任意读写而互不干扰，也不用管理锁的问题，ThreadLocal内部会处理。</span><br><span class="line">def process_student():</span><br><span class="line">    std &#x3D; local_school.student</span><br><span class="line">    print(&#39;Hello, %s (in %s)&#39; % (std,threading.current_thread().name))</span><br><span class="line">    </span><br><span class="line">def process_thread(name):</span><br><span class="line">    local_school.student &#x3D; name</span><br><span class="line">    process_student()</span><br><span class="line">    </span><br><span class="line">t1&#x3D;threading.Thread(target&#x3D;process_thread,args&#x3D;(&#39;Alice&#39;,),name&#x3D;&#39;Thread-A&#39;)</span><br><span class="line">t2&#x3D;threading.Thread(target&#x3D;process_thread,args&#x3D;(&#39;Bob&#39;,),name&#x3D;&#39;Tread-B&#39;)</span><br><span class="line">t1.start()</span><br><span class="line">t2.start()</span><br><span class="line">t1.join()</span><br><span class="line">t2.join()</span><br></pre></td></tr></table></figure>

<h1 id="分布式进程-待理解"><a href="#分布式进程-待理解" class="headerlink" title="分布式进程 待理解"></a>分布式进程 待理解</h1><h2 id="通过managers模块把Queue通过网络暴露出去，就可以让其他机器的进程访问Queue了"><a href="#通过managers模块把Queue通过网络暴露出去，就可以让其他机器的进程访问Queue了" class="headerlink" title="通过managers模块把Queue通过网络暴露出去，就可以让其他机器的进程访问Queue了"></a>通过managers模块把Queue通过网络暴露出去，就可以让其他机器的进程访问Queue了</h2><hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"># task_master.py</span><br><span class="line">import random, time, queue</span><br><span class="line">from multiprocessing.managers import BaseManager</span><br><span class="line"></span><br><span class="line"># 发送任务的队列:</span><br><span class="line">task_queue &#x3D; queue.Queue()</span><br><span class="line"># 接收结果的队列:</span><br><span class="line">result_queue &#x3D; queue.Queue()</span><br><span class="line"></span><br><span class="line"># 从BaseManager继承的QueueManager:</span><br><span class="line">class QueueManager(BaseManager):</span><br><span class="line">    pass</span><br><span class="line"></span><br><span class="line"># 把两个Queue都注册到网络上, callable参数关联了Queue对象:</span><br><span class="line">QueueManager.register(&#39;get_task_queue&#39;, callable&#x3D;lambda: task_queue)</span><br><span class="line">QueueManager.register(&#39;get_result_queue&#39;, callable&#x3D;lambda: result_queue)</span><br><span class="line"># 绑定端口5000, 设置验证码&#39;abc&#39;:</span><br><span class="line">manager &#x3D; QueueManager(address&#x3D;(&#39;&#39;, 5000), authkey&#x3D;b&#39;abc&#39;)</span><br><span class="line"># 启动Queue:</span><br><span class="line">manager.start()</span><br><span class="line"># 获得通过网络访问的Queue对象:</span><br><span class="line">task &#x3D; manager.get_task_queue()</span><br><span class="line">result &#x3D; manager.get_result_queue()</span><br><span class="line"># 放几个任务进去:</span><br><span class="line">for i in range(10):</span><br><span class="line">    n &#x3D; random.randint(0, 10000)</span><br><span class="line">    print(&#39;Put task %d...&#39; % n)</span><br><span class="line">    task.put(n)</span><br><span class="line"># 从result队列读取结果:</span><br><span class="line">print(&#39;Try get results...&#39;)</span><br><span class="line">for i in range(10):</span><br><span class="line">    r &#x3D; result.get(timeout&#x3D;10)</span><br><span class="line">    print(&#39;Result: %s&#39; % r)</span><br><span class="line"># 关闭:</span><br><span class="line">manager.shutdown()</span><br><span class="line">print(&#39;master exit.&#39;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#在另一台电脑上启动该任务进程(本机也可以)</span><br><span class="line">import time, sys, queue</span><br><span class="line">from multiprocessing.managers import BaseManager</span><br><span class="line"></span><br><span class="line"># 创建类似的QueueManager:</span><br><span class="line">class QueueManager(BaseManager):</span><br><span class="line">    pass</span><br><span class="line"></span><br><span class="line"># 由于这个QueueManager只从网络上获取Queue，所以注册时只提供名字:</span><br><span class="line">QueueManager.register(&#39;get_task_queue&#39;)</span><br><span class="line">QueueManager.register(&#39;get_result_queue&#39;)</span><br><span class="line"></span><br><span class="line"># 连接到服务器，也就是运行task_master.py的机器:</span><br><span class="line">server_addr &#x3D; &#39;127.0.0.1&#39;#IP</span><br><span class="line">print(&#39;Connect to server %s...&#39; % server_addr)</span><br><span class="line"># 端口和验证码注意保持与task_master.py设置的完全一致:</span><br><span class="line">m &#x3D; QueueManager(address&#x3D;(server_addr, 5000), authkey&#x3D;b&#39;abc&#39;)</span><br><span class="line"># 从网络连接:</span><br><span class="line">m.connect()</span><br><span class="line"># 获取Queue的对象:</span><br><span class="line">task &#x3D; m.get_task_queue()</span><br><span class="line">result &#x3D; m.get_result_queue()</span><br><span class="line"># 从task队列取任务,并把结果写入result队列:</span><br><span class="line">for i in range(10):</span><br><span class="line">    try:</span><br><span class="line">        n &#x3D; task.get(timeout&#x3D;1)</span><br><span class="line">        print(&#39;run task %d * %d...&#39; % (n, n))</span><br><span class="line">        r &#x3D; &#39;%d * %d &#x3D; %d&#39; % (n, n, n*n)</span><br><span class="line">        time.sleep(1)</span><br><span class="line">        result.put(r)</span><br><span class="line">    except Queue.Empty:</span><br><span class="line">        print(&#39;task queue is empty.&#39;)</span><br><span class="line"># 处理结束:</span><br><span class="line">print(&#39;worker exit.&#39;)</span><br></pre></td></tr></table></figure>

<h1 id="正则表达式"><a href="#正则表达式" class="headerlink" title="正则表达式"></a>正则表达式</h1><h2 id="匹配法则"><a href="#匹配法则" class="headerlink" title="匹配法则"></a>匹配法则</h2><hr>
<table>
<thead>
<tr>
<th>符号</th>
<th>匹配内容</th>
</tr>
</thead>
<tbody><tr>
<td>\d</td>
<td>一个数字</td>
</tr>
<tr>
<td>\w</td>
<td>一个字母或数字</td>
</tr>
<tr>
<td>\s</td>
<td>一个空格或TAB</td>
</tr>
<tr>
<td>后缀</td>
<td></td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th>符号</th>
<th>匹配内容</th>
</tr>
</thead>
<tbody><tr>
<td>.</td>
<td>一个字符</td>
</tr>
<tr>
<td>*</td>
<td>任意个字符</td>
</tr>
<tr>
<td>+</td>
<td>至少一个字符</td>
</tr>
<tr>
<td>?</td>
<td>0或一个字符</td>
</tr>
<tr>
<td>{n}</td>
<td>n个字符</td>
</tr>
<tr>
<td>{n,m}</td>
<td>n-m个字符</td>
</tr>
<tr>
<td>组合法则</td>
<td></td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th>符号</th>
<th>匹配内容</th>
</tr>
</thead>
<tbody><tr>
<td>[0-9a-zA-Z_]</td>
<td>一个数字、字母或者下划线</td>
</tr>
<tr>
<td>[0-9a-zA-Z_]+</td>
<td>至少由一个数字、字母或者下划线组成的字符串</td>
</tr>
<tr>
<td>[a-zA-Z_][0-9a-zA-Z_]*</td>
<td>可以匹配由字母或下划线开头，后接任意个由一个数字、字母或者下划线组成的字符串，也就是Python合法的变量</td>
</tr>
<tr>
<td>特殊符号</td>
<td></td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th>符号</th>
<th>匹配内容</th>
</tr>
</thead>
<tbody><tr>
<td>A &amp;#122 B</td>
<td>A或B</td>
</tr>
<tr>
<td>^</td>
<td>行开头</td>
</tr>
<tr>
<td>$</td>
<td>行结尾</td>
</tr>
</tbody></table>
<h2 id="re模块"><a href="#re模块" class="headerlink" title="re模块"></a>re模块</h2><hr>
<p><code>import re</code></p>
<ul>
<li><p>match匹配</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">if re.match(r&#39;^\d&#123;3&#125;\-\d&#123;3,8&#125;$&#39;, &#39;010-12345&#39;):</span><br><span class="line">    print(&#39;OK&#39;)</span><br><span class="line">else:</span><br><span class="line">    print(&#39;failed&#39;)</span><br></pre></td></tr></table></figure></li>
<li><p>切分字符串<br>re.split(r’分割标志’,’待分割字符串’)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">re.split(r&#39;&#39;[\s\,\;]+&#39;, &#39;a,b;; c  d&#39;)</span><br><span class="line">#[&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;]</span><br></pre></td></tr></table></figure></li>
<li><p>提取分组group</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; m &#x3D; re.match(r&#39;^(\d&#123;3&#125;)-(\d&#123;3,8&#125;)$&#39;, &#39;010-12345&#39;)</span><br><span class="line">&gt;&gt;&gt; m</span><br><span class="line">&lt;_sre.SRE_Match object; span&#x3D;(0, 9), match&#x3D;&#39;010-12345&#39;&gt;</span><br><span class="line">&gt;&gt;&gt; m.group(0)</span><br><span class="line">&#39;010-12345&#39;</span><br><span class="line">&gt;&gt;&gt; m.group(1)</span><br><span class="line">&#39;010&#39;</span><br><span class="line">&gt;&gt;&gt; m.group(2)</span><br><span class="line">&#39;12345&#39;</span><br></pre></td></tr></table></figure></li>
<li><p>非贪婪匹配</p>
</li>
<li><p><em>正则表达式默认为贪婪匹配，即匹配最大化*</em></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">re.match(r&#39;^(\d+?)(0*)$&#39;, &#39;102300&#39;).groups()</span><br><span class="line">#(&#39;1023&#39;, &#39;00&#39;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>编译正则表达式</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">re_telephone &#x3D; re.compile(r&#39;^(\d&#123;3&#125;)-(\d&#123;3,8&#125;)$&#39;)</span><br><span class="line">re_telephone.match(&#39;010-12345&#39;).groups()&#x3D;&#x3D;(&#39;010&#39;, &#39;12345&#39;)</span><br><span class="line">re_telephone.match(&#39;010-8086&#39;).groups()&#x3D;&#x3D;(&#39;010&#39;, &#39;8086&#39;)</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h1 id="datetime模块-时间"><a href="#datetime模块-时间" class="headerlink" title="datetime模块 时间"></a>datetime模块 时间</h1><p><code>from datetime import datetime</code></p>
<h2 id="时间"><a href="#时间" class="headerlink" title="时间"></a>时间</h2><hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">now &#x3D; datetime.now()</span><br><span class="line">print(now)#当前时间</span><br><span class="line">print(type(now))#&lt;class &#39;datetime.datetime&#39;&gt;</span><br><span class="line"></span><br><span class="line">dt&#x3D;datetime(2015,4,19,12,20)</span><br><span class="line">print(dt)#2015-04-19 12:20:00</span><br></pre></td></tr></table></figure>

<h2 id="timestamp与datetime互相转换"><a href="#timestamp与datetime互相转换" class="headerlink" title="timestamp与datetime互相转换"></a>timestamp与datetime互相转换</h2><hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">#epoch time：1970年1月1日 00:00:00 UTC+00:00</span><br><span class="line">#timestamp指距离epoch time的秒数</span><br><span class="line">t&#x3D;1429417200.0#注意是浮点数</span><br><span class="line">print(datetime.fromtimestamp(t))#2015-04-19 12:20:00</span><br><span class="line"></span><br><span class="line">dt &#x3D; datetime(2015, 4, 19, 12, 20) # 用指定日期时间创建datetime</span><br><span class="line">dt.timestamp() # 把datetime转换为timestamp</span><br></pre></td></tr></table></figure>

<h2 id="str与datetime互相转换"><a href="#str与datetime互相转换" class="headerlink" title="str与datetime互相转换"></a>str与datetime互相转换</h2><hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">now&#x3D;datetime.now()</span><br><span class="line">print(now.strftime(&#39;%a,%b %d %H:%M&#39;))</span><br><span class="line"></span><br><span class="line">cday &#x3D; datetime.strptime(&#39;2015-6-1 18:19:59&#39;, &#39;%Y-%m-%d %H:%M:%S&#39;)</span><br><span class="line">print(cday)#2015-06-01 18:19:59</span><br></pre></td></tr></table></figure>

<h2 id="datetime加减"><a href="#datetime加减" class="headerlink" title="datetime加减"></a>datetime加减</h2><hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">from datetime import timedelta</span><br><span class="line">now &#x3D; datetime.now()</span><br><span class="line">print(now + timedelta(hours&#x3D;10,days&#x3D;1))</span><br></pre></td></tr></table></figure>

<h2 id="本地时间转换为UTC时间"><a href="#本地时间转换为UTC时间" class="headerlink" title="本地时间转换为UTC时间"></a>本地时间转换为UTC时间</h2><hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">from datetime import datetime, timedelta, timezone</span><br><span class="line">tz_utc_8 &#x3D; timezone(timedelta(hours&#x3D;8))</span><br><span class="line">now &#x3D; datetime.now()</span><br><span class="line">print(now)</span><br><span class="line">dt &#x3D; now.replace(tzinfo&#x3D;tz_utc_8)</span><br><span class="line">#tzinfo即为时区，默认为None</span><br><span class="line">print(dt)</span><br></pre></td></tr></table></figure>

<h2 id="时区转换"><a href="#时区转换" class="headerlink" title="时区转换"></a>时区转换</h2><hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">utc_dt &#x3D; datetime.utcnow().replace(tzinfo&#x3D;timezone.utc)</span><br><span class="line"># astimezone()将转换时区为北京时间:</span><br><span class="line">bj_dt &#x3D; utc_dt.astimezone(timezone(timedelta(hours&#x3D;8)))</span><br><span class="line">print(bj_dt)</span><br><span class="line"># astimezone()将转换时区为东京时间:</span><br><span class="line">tokyo_dt &#x3D; utc_dt.astimezone(timezone(timedelta(hours&#x3D;9)))</span><br><span class="line">print(tokyo_dt)</span><br><span class="line"># astimezone()将bj_dt转换时区为东京时间:</span><br><span class="line">tokyo_dt2 &#x3D; bj_dt.astimezone(timezone(timedelta(hours&#x3D;9)))</span><br><span class="line">print(tokyo_dt2)</span><br></pre></td></tr></table></figure>

<h1 id="collections模块-升级的Dict"><a href="#collections模块-升级的Dict" class="headerlink" title="collections模块 升级的Dict"></a>collections模块 升级的Dict</h1><h2 id="namedtuple-不变的set-本质为tuple"><a href="#namedtuple-不变的set-本质为tuple" class="headerlink" title="namedtuple 不变的set(本质为tuple)"></a>namedtuple 不变的set(本质为tuple)</h2><hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">from collections import namedtuple</span><br><span class="line">Point &#x3D; namedtuple(&#39;Point&#39;,[&#39;x&#39;,&#39;y&#39;])</span><br><span class="line">p &#x3D; Point(1,2)</span><br><span class="line">p.x&#x3D;&#x3D;1</span><br><span class="line">p.y&#x3D;&#x3D;2</span><br></pre></td></tr></table></figure>

<h2 id="deque-链表-list像数组而非链表"><a href="#deque-链表-list像数组而非链表" class="headerlink" title="deque 链表(list像数组而非链表)"></a>deque 链表(list像数组而非链表)</h2><hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">from collections import deque</span><br><span class="line">q &#x3D; deque([&#39;a&#39;,&#39;b&#39;,&#39;c&#39;])</span><br><span class="line">q.append(&#39;x&#39;)#对应的还有pop</span><br><span class="line">q.appendleft(&#39;y&#39;)</span><br><span class="line">print(q)</span><br><span class="line"></span><br><span class="line">d&#x3D;deque(maxlen&#x3D;20)</span><br><span class="line">for i in range(30):</span><br><span class="line">    d.append(str(i))</span><br><span class="line">print(d)</span><br><span class="line"></span><br><span class="line">d&#x3D;deque([1,2,3,4,5])</span><br><span class="line">d.extend([0])#加入list</span><br><span class="line">d.extendleft([6,7,8])#注意这里是反序添加</span><br><span class="line">print(d)</span><br></pre></td></tr></table></figure>

<h2 id="defaultdict带默认key值得dict"><a href="#defaultdict带默认key值得dict" class="headerlink" title="defaultdict带默认key值得dict"></a>defaultdict带默认key值得dict</h2><hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">from collections import defaultdict</span><br><span class="line">dd&#x3D;defaultdict(lambda:&#39;N&#x2F;A&#39;)</span><br><span class="line">dd[&#39;key1&#39;]&#x3D;&#39;abc&#39;</span><br><span class="line">print(dd[&#39;key1&#39;])</span><br><span class="line">print(dd[&#39;key2&#39;])</span><br></pre></td></tr></table></figure>

<h2 id="OrderedDict有序的Dict-list型Dict-及队列的实现"><a href="#OrderedDict有序的Dict-list型Dict-及队列的实现" class="headerlink" title="OrderedDict有序的Dict(list型Dict)及队列的实现"></a>OrderedDict有序的Dict(list型Dict)及队列的实现</h2><hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">from collections import OrderedDict</span><br><span class="line">d&#x3D;dict([(&#39;a&#39;,1),(&#39;b&#39;,2),(&#39;c&#39;,3)])#注意格式</span><br><span class="line">print(d)</span><br><span class="line">d[&#39;z&#39;]&#x3D;4</span><br><span class="line">print(d)#向后插入</span><br><span class="line">#利用OrderedDict可以实现队列功能</span><br><span class="line">class LastUpdateOrderedDict(OrderedDict):</span><br><span class="line"></span><br><span class="line">    def __init__(self,capacity):</span><br><span class="line">        super(LastUpdateOrderedDict,self).__init__()#调用超类函数，等价写法：super().__init__()</span><br><span class="line">        self._capacity &#x3D; capacity#容量</span><br><span class="line">    </span><br><span class="line">    def __setitem__(self,key,value):</span><br><span class="line">        containKey &#x3D; 1 if key in self else 0</span><br><span class="line">        #containKey&#x3D;1：修改操作，0：增添操作</span><br><span class="line">        if len(self) - containKey &gt;&#x3D;self._capacity:</span><br><span class="line">            last &#x3D; self.popitem(last &#x3D; False)#弹出第一个</span><br><span class="line">            print(&#39;remove:&#39;.last)</span><br><span class="line">        if containKey:</span><br><span class="line">            def self[key]</span><br><span class="line">            print(&#39;set:&#39;,(key,value))</span><br><span class="line">        else:</span><br><span class="line">            print(&#39;add:&#39;,(key,value))</span><br><span class="line">        OrderedDict.__setitem__(self,key,value)</span><br></pre></td></tr></table></figure>
<h2 id="Counter-计数器-对于不存在的key-默认值为0，相当于defaultdict"><a href="#Counter-计数器-对于不存在的key-默认值为0，相当于defaultdict" class="headerlink" title="Counter 计数器,对于不存在的key 默认值为0，相当于defaultdict"></a>Counter 计数器,对于不存在的key 默认值为0，相当于defaultdict</h2><hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">from collections import Counter</span><br><span class="line">c &#x3D; Counter()</span><br><span class="line">for ch in &#39;programming&#39;:</span><br><span class="line">    c[ch] &#x3D; c[ch] + 1</span><br><span class="line">print(c)</span><br></pre></td></tr></table></figure>

<h1 id="base64模块-二进制与字符串"><a href="#base64模块-二进制与字符串" class="headerlink" title="base64模块 二进制与字符串"></a>base64模块 二进制与字符串</h1><p>参考 <a href="https://www.liaoxuefeng.com/wiki/0014316089557264a6b348958f449949df42a6d3a2e542c000/001431954588961d6b6f51000ca4279a3415ce14ed9d709000" target="_blank" rel="noopener">https://www.liaoxuefeng.com/wiki/0014316089557264a6b348958f449949df42a6d3a2e542c000/001431954588961d6b6f51000ca4279a3415ce14ed9d709000</a></p>
<ul>
<li>可以将二进制转换到字符串<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">import base64</span><br><span class="line">print(base64.b64encode(b&#39;faggdfgsdf&#39;))#字符串转化为编码</span><br><span class="line">print(base64.b64decode(b&#39;ZmFnZ2RmZ3NkZg&#x3D;&#x3D;&#39;))#编码转化为字符串</span><br></pre></td></tr></table></figure></li>
<li>把字符+和/分别变成-和_以作为URL参数<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; base64.b64encode(b&#39;i\xb7\x1d\xfb\xef\xff&#39;)</span><br><span class="line">b&#39;abcd++&#x2F;&#x2F;&#39;</span><br><span class="line">&gt;&gt;&gt; base64.urlsafe_b64encode(b&#39;i\xb7\x1d\xfb\xef\xff&#39;)</span><br><span class="line">b&#39;abcd--__&#39;</span><br><span class="line">&gt;&gt;&gt; base64.urlsafe_b64decode(&#39;abcd--__&#39;)</span><br><span class="line">b&#39;i\xb7\x1d\xfb\xef\xff&#39;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h1 id="python自带的交互界面"><a href="#python自带的交互界面" class="headerlink" title="python自带的交互界面"></a>python自带的交互界面</h1><p>参考 <a href="http://www.runoob.com/python/python-gui-tkinter.html" target="_blank" rel="noopener">http://www.runoob.com/python/python-gui-tkinter.html</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">from tkinter import *</span><br><span class="line">import tkinter.messagebox as messagebox</span><br><span class="line"></span><br><span class="line">class Application(Frame):</span><br><span class="line">    def __init__(self,master&#x3D;None):</span><br><span class="line">        Frame.__init__(self,master)</span><br><span class="line">        self.pack()</span><br><span class="line">        self.createWidgets()</span><br><span class="line">    </span><br><span class="line">    def createWidgets(self):</span><br><span class="line">        self.helloLabel &#x3D; Label(self, text&#x3D;&#39;Hello,world&#39;)</span><br><span class="line">        self.helloLabel.pack()#加入父容器</span><br><span class="line">        self.quieButton &#x3D; Button(self,text&#x3D;&#39;Quit&#39;,command&#x3D;self.quit)</span><br><span class="line">        self.quieButton.pack()#加入父容器</span><br><span class="line">        </span><br><span class="line">        self.nameInput &#x3D; Entry(self)#待输入文本框</span><br><span class="line">        self.nameInput.pack()</span><br><span class="line">        self.alertButton &#x3D; Button(self, text&#x3D;&#39;Hello&#39;, command&#x3D;self.hello)</span><br><span class="line">        self.alertButton.pack()</span><br><span class="line">    </span><br><span class="line">    def hello(self):</span><br><span class="line">        name &#x3D; self.nameInput.get() or &#39;world&#39;</span><br><span class="line">        messagebox.showinfo(&#39;Message&#39;, &#39;Hello, %s&#39; % name)#弹出窗口信息</span><br><span class="line">        </span><br><span class="line">app &#x3D; Application()</span><br><span class="line">app.master.title(&#39;Hello,world!&#39;)</span><br><span class="line">app.mainloop()</span><br></pre></td></tr></table></figure>

<h1 id="TCP编程"><a href="#TCP编程" class="headerlink" title="TCP编程"></a>TCP编程</h1><p><code>import socket</code></p>
<ul>
<li>用户端<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">#创建一个socket</span><br><span class="line">s &#x3D; socket.socket(socket.AF_INET,socket.SOCK_STREAM)#参数意思为：使用IPv6协议，面向流</span><br><span class="line">#建立连接</span><br><span class="line">s.connect((&#39;www.sina.com.cn&#39;,80))#IP地址由域名自动转化而得，端口号被新浪服务器固定为80</span><br><span class="line">#发送数据(请求)</span><br><span class="line">s.send(b&#39;GET &#x2F; HTTP&#x2F;1.1\r\nHost: www.sina.com.cn\r\nConnection: close\r\n\r\n&#39;)</span><br><span class="line">#接收数据</span><br><span class="line">buffer &#x3D; []</span><br><span class="line">while True:</span><br><span class="line">    #每次最多接受1K字节</span><br><span class="line">    d &#x3D; s.recv(1024)#recv(max)</span><br><span class="line">    if d:</span><br><span class="line">        buffer.append(d)</span><br><span class="line">    else:</span><br><span class="line">        break</span><br><span class="line">data &#x3D; b&#39;&#39;.join(buffer)</span><br><span class="line">#关闭连接</span><br><span class="line">s.close()</span><br><span class="line">#处理接受的数据</span><br><span class="line">header,html &#x3D;data.split(b&#39;\r\n\r\n&#39;,1)#分割一次</span><br><span class="line">print(header.decode(&#39;utf-8&#39;))</span><br><span class="line">#将剩下的网页内容存入文件</span><br><span class="line">with open(&#39;new1.html&#39;,&#39;wb&#39;) as f:</span><br><span class="line">    f.write(html)</span><br></pre></td></tr></table></figure></li>
<li>服务器<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">import time,threading</span><br><span class="line">s &#x3D; socket.socket(socket.AF_INET,socket.SOCK_STREAM)</span><br><span class="line">#绑定要监听的地址和端口 127.0.0.1表示本机地址</span><br><span class="line">s.bind((&#39;127.0.0.1&#39;,9999))#小于1024的端口需要管理员权限，为标准服务</span><br><span class="line">#开始监听，参数为指定等待连接的最大数量</span><br><span class="line">s.listen(5)</span><br><span class="line">print(&#39;Waiting for connection...&#39;)</span><br><span class="line">def tcplink(sock, addr):</span><br><span class="line">    print(&#39;Accept new connection from %s:%s...&#39; % addr)</span><br><span class="line">    sock.send(b&#39;Welcome!&#39;)</span><br><span class="line">    while True:</span><br><span class="line">        data &#x3D; sock.recv(1024)</span><br><span class="line">        time.sleep(1)</span><br><span class="line">        if not data or data.decode(&#39;utf-8&#39;) &#x3D;&#x3D; &#39;exit&#39;:</span><br><span class="line">            break</span><br><span class="line">        sock.send((&#39;Hello, %s!&#39; % data.decode(&#39;utf-8&#39;)).encode(&#39;utf-8&#39;))</span><br><span class="line">    sock.close()</span><br><span class="line">    print(&#39;Connection from %s:%s closed.&#39; % addr)</span><br><span class="line">while True:</span><br><span class="line">    # 接受一个新连接:</span><br><span class="line">    sock, addr &#x3D; s.accept()</span><br><span class="line">    # 创建新线程来处理TCP连接:</span><br><span class="line">    t &#x3D; threading.Thread(target&#x3D;tcplink, args&#x3D;(sock, addr))</span><br><span class="line">    t.start()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#与之对应的客户端程序</span><br><span class="line">#s &#x3D; socket.socket(socket.AF_INET, socket.SOCK_STREAM)</span><br><span class="line"># 建立连接:</span><br><span class="line">#s.connect((&#39;127.0.0.1&#39;, 9999))</span><br><span class="line"># 接收欢迎消息:</span><br><span class="line">#print(s.recv(1024).decode(&#39;utf-8&#39;))</span><br><span class="line">#for data in [b&#39;Michael&#39;, b&#39;Tracy&#39;, b&#39;Sarah&#39;]:</span><br><span class="line">#    # 发送数据:</span><br><span class="line">#    s.send(data)</span><br><span class="line">#    print(s.recv(1024).decode(&#39;utf-8&#39;))</span><br><span class="line">#s.send(b&#39;exit&#39;)</span><br><span class="line">#s.close()</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h1 id="UDP编程"><a href="#UDP编程" class="headerlink" title="UDP编程"></a>UDP编程</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">import socket</span><br><span class="line"></span><br><span class="line">s &#x3D; socket.socket(socket.AF_INET, socket.SOCK_DGRAM)</span><br><span class="line"># 绑定端口:</span><br><span class="line">s.bind((&#39;127.0.0.1&#39;, 9999))</span><br><span class="line">#UDP无需监听 直接接受任何客户端数据</span><br><span class="line">print(&#39;Bind UDP on 9999...&#39;)</span><br><span class="line">while True:</span><br><span class="line">    # 接收数据:</span><br><span class="line">    data, addr &#x3D; s.recvfrom(1024)#返回数据和客户端的地址与端口</span><br><span class="line">    print(&#39;Received from %s:%s.&#39; % addr)</span><br><span class="line">    s.sendto(b&#39;Hello, %s!&#39; % data, addr)</span><br></pre></td></tr></table></figure>

<h1 id="SMTP发送邮件"><a href="#SMTP发送邮件" class="headerlink" title="SMTP发送邮件"></a>SMTP发送邮件</h1><p>流程阐述：发件人 -&gt; MUA -&gt; MTA -&gt; MTA -&gt; 若干个MTA -&gt; MDA &lt;- MUA &lt;- 收件人</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line">from email import encoders</span><br><span class="line">from email.header import Header</span><br><span class="line">from email.mime.text import MIMEText</span><br><span class="line">from email.utils import parseaddr, formataddr</span><br><span class="line"></span><br><span class="line">import smtplib</span><br><span class="line"></span><br><span class="line">def _format_addr(s):#格式化地址</span><br><span class="line">#需要格式化的原因在于，中文的header对象（请求头）需要编码</span><br><span class="line">    name, addr &#x3D; parseaddr(s)</span><br><span class="line">    &#39;&#39;&#39;#解析s中的email地址，如下</span><br><span class="line">    &gt;&gt;&gt; import email.utils</span><br><span class="line">    &gt;&gt;&gt; email.utils.parseaddr(&#39;tim_spac@126.com&#39;)</span><br><span class="line">    (&#39;&#39;, &#39;tim_spac@126.com&#39;)</span><br><span class="line">    &gt;&gt;&gt; email.utils.parseaddr(&#39;&quot;Lao Wang&quot; &lt;tim_spac@126.com&gt;&#39;)</span><br><span class="line">    (&#39;Lao Wang&#39;, &#39;tim_spac@126.com&#39;)</span><br><span class="line">    &#39;&#39;&#39;</span><br><span class="line">    return formataddr((Header(name, &#39;utf-8&#39;).encode(), addr))</span><br><span class="line"></span><br><span class="line">from_addr &#x3D; input(&#39;From: &#39;)</span><br><span class="line">password &#x3D; input(&#39;Password: &#39;)</span><br><span class="line">to_addr &#x3D; input(&#39;To: &#39;)</span><br><span class="line">smtp_server &#x3D; input(&#39;SMTP server: &#39;)</span><br><span class="line"></span><br><span class="line">msg &#x3D; MIMEText(&#39;hello, send by Python...&#39;, &#39;plain&#39;, &#39;utf-8&#39;)</span><br><span class="line">    #此注释显示非纯文本的其他形式（&#39;plain&#39;表示发送为纯文本）</span><br><span class="line">    &#39;&#39;&#39;带HTML</span><br><span class="line">    msg &#x3D; MIMEText(&#39;&lt;html&gt;&lt;body&gt;&lt;h1&gt;Hello&lt;&#x2F;h1&gt;&#39; +</span><br><span class="line">    &#39;&lt;p&gt;send by &lt;a href&#x3D;&quot;http:&#x2F;&#x2F;www.python.org&quot;&gt;Python&lt;&#x2F;a&gt;...&lt;&#x2F;p&gt;&#39; +</span><br><span class="line">    &#39;&lt;&#x2F;body&gt;&lt;&#x2F;html&gt;&#39;, &#39;html&#39;, &#39;utf-8&#39;)</span><br><span class="line">    &#39;&#39;&#39;</span><br><span class="line">    </span><br><span class="line">    &#39;&#39;&#39;带附件</span><br><span class="line">    #如果Email中要加上附件怎么办？带附件的邮件可以看做包含若干部分的邮件：文本和各个附件本身，</span><br><span class="line">    #所以，可以构造一个MIMEMultipart对象代表邮件本身，然后往里面加上一个MIMEText作为邮件正文，再继续往里面加上表示附件的MIMEBase对象即可：</span><br><span class="line">    # 邮件对象:</span><br><span class="line">    msg &#x3D; MIMEMultipart()</span><br><span class="line">    # 邮件正文是MIMEText:</span><br><span class="line">    msg.attach(MIMEText(&#39;send with file...&#39;, &#39;plain&#39;, &#39;utf-8&#39;))</span><br><span class="line">    # 添加附件就是加上一个MIMEBase，从本地读取一个图片:</span><br><span class="line">    with open(&#39;&#x2F;Users&#x2F;michael&#x2F;Downloads&#x2F;test.png&#39;, &#39;rb&#39;) as f:</span><br><span class="line">        # 设置附件的MIME和文件名，这里是png类型:</span><br><span class="line">        mime &#x3D; MIMEBase(&#39;image&#39;, &#39;png&#39;, filename&#x3D;&#39;test.png&#39;)</span><br><span class="line">        # 加上必要的头信息:</span><br><span class="line">        mime.add_header(&#39;Content-Disposition&#39;, &#39;attachment&#39;, filename&#x3D;&#39;test.png&#39;)</span><br><span class="line">        mime.add_header(&#39;Content-ID&#39;, &#39;&lt;0&gt;&#39;)</span><br><span class="line">        mime.add_header(&#39;X-Attachment-Id&#39;, &#39;0&#39;)</span><br><span class="line">        # 把附件的内容读进来:</span><br><span class="line">        mime.set_payload(f.read())</span><br><span class="line">        # 用Base64编码:</span><br><span class="line">        encoders.encode_base64(mime)</span><br><span class="line">        # 添加到MIMEMultipart:</span><br><span class="line">        msg.attach(mime)</span><br><span class="line">    &#39;&#39;&#39;</span><br><span class="line">    </span><br><span class="line">    &#39;&#39;&#39;发送图片????</span><br><span class="line">    msg &#x3D; MIMEMultipart()</span><br><span class="line">    msg.attach(MIMEText(&#39;&lt;html&gt;&lt;body&gt;&lt;h1&gt;Hello&lt;&#x2F;h1&gt;&#39; +</span><br><span class="line">        &#39;&lt;p&gt;&lt;img src&#x3D;&quot;cid:0&quot;&gt;&lt;&#x2F;p&gt;&#39; +</span><br><span class="line">        &#39;&lt;&#x2F;body&gt;&lt;&#x2F;html&gt;&#39;, &#39;html&#39;, &#39;utf-8&#39;))</span><br><span class="line">    &#39;&#39;&#39;</span><br><span class="line">    </span><br><span class="line">    &#39;&#39;&#39;同时支持HTML和Plain（当无法正常查看HTML时降级为查看Plain）</span><br><span class="line">    msg &#x3D; MIMEMultipart(&#39;alternative&#39;)#可供代替的</span><br><span class="line">    msg.attach(MIMEText(&#39;hello&#39;, &#39;plain&#39;, &#39;utf-8&#39;))</span><br><span class="line">    msg.attach(MIMEText(&#39;&lt;html&gt;&lt;body&gt;&lt;h1&gt;Hello&lt;&#x2F;h1&gt;&lt;&#x2F;body&gt;&lt;&#x2F;html&gt;&#39;, &#39;html&#39;, &#39;utf-8&#39;))</span><br><span class="line">    &#39;&#39;&#39;</span><br><span class="line">msg[&#39;From&#39;] &#x3D; _format_addr(&#39;Python爱好者 &lt;%s&gt;&#39; % from_addr)#发件人</span><br><span class="line">msg[&#39;To&#39;] &#x3D; _format_addr(&#39;管理员 &lt;%s&gt;&#39; % to_addr)#收件人</span><br><span class="line">msg[&#39;Subject&#39;] &#x3D; Header(&#39;来自SMTP的问候……&#39;, &#39;utf-8&#39;).encode()#主题</span><br><span class="line"></span><br><span class="line">server &#x3D; smtplib.SMTP(smtp_server, 25)#默认端口25</span><br><span class="line">server.set_debuglevel(1)#打印出于SMTP服务器交互的所有信息</span><br><span class="line">server.login(from_addr, password)#登录</span><br><span class="line">server.sendmail(from_addr, [to_addr], msg.as_string())#注意收件人为list</span><br><span class="line">#as_string可以将MIMEText转化为str</span><br><span class="line">server.quit()</span><br><span class="line">#结果原始内容如下</span><br><span class="line">&#39;&#39;&#39;</span><br><span class="line">From: &#x3D;?utf-8?b?UHl0aG9u54ix5aW96ICF?&#x3D; &lt;xxxxxx@163.com&gt;</span><br><span class="line">To: &#x3D;?utf-8?b?566h55CG5ZGY?&#x3D; &lt;xxxxxx@qq.com&gt;</span><br><span class="line">Subject: &#x3D;?utf-8?b?5p2l6IeqU01UUOeahOmXruWAmeKApuKApg&#x3D;&#x3D;?&#x3D;</span><br><span class="line">&#39;&#39;&#39;</span><br></pre></td></tr></table></figure>
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/python/" rel="tag"># python</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2019/01/27/md%E6%96%87%E4%BB%B6%E4%B9%A6%E5%86%99%E8%A7%84%E5%88%99/" rel="next" title="md文件书写规则">
                <i class="fa fa-chevron-left"></i> md文件书写规则
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2019/01/29/django%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" rel="prev" title="django学习笔记">
                django学习笔记 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  
    <div class="comments" id="comments">
    </div>
  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/avatar.gif"
                alt="陈潇" />
            
              <p class="site-author-name" itemprop="name">陈潇</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/%7C%7C%20archive">
              
                  <span class="site-state-item-count">47</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">14</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/iwannatobehappy" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://845895322@qq.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#前言"><span class="nav-number">1.</span> <span class="nav-text">前言</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#python语言最基础"><span class="nav-number">2.</span> <span class="nav-text">python语言最基础</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#字符编码"><span class="nav-number">2.1.</span> <span class="nav-text">字符编码</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#列表与元组"><span class="nav-number">2.2.</span> <span class="nav-text">列表与元组</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#可迭代与迭代器"><span class="nav-number">2.3.</span> <span class="nav-text">可迭代与迭代器</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#循环"><span class="nav-number">2.4.</span> <span class="nav-text">循环</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#dict与set"><span class="nav-number">2.5.</span> <span class="nav-text">dict与set</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#数组转化为字符串——join"><span class="nav-number">2.6.</span> <span class="nav-text">数组转化为字符串——join</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#函数"><span class="nav-number">3.</span> <span class="nav-text">函数</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#函数参数"><span class="nav-number">3.1.</span> <span class="nav-text">函数参数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#普通递归与尾递归"><span class="nav-number">3.2.</span> <span class="nav-text">普通递归与尾递归</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#列表生成器"><span class="nav-number">3.3.</span> <span class="nav-text">列表生成器</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#map对应运行"><span class="nav-number">3.4.</span> <span class="nav-text">map对应运行</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#filter依据筛选"><span class="nav-number">3.5.</span> <span class="nav-text">filter依据筛选</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#sorted排序"><span class="nav-number">3.6.</span> <span class="nav-text">sorted排序</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#zip打包"><span class="nav-number">3.7.</span> <span class="nav-text">zip打包</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#函数作为返回值"><span class="nav-number">3.8.</span> <span class="nav-text">函数作为返回值</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#lambda匿名函数"><span class="nav-number">3.9.</span> <span class="nav-text">lambda匿名函数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#装饰器"><span class="nav-number">3.10.</span> <span class="nav-text">装饰器</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#偏函数"><span class="nav-number">3.11.</span> <span class="nav-text">偏函数</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#类与实例"><span class="nav-number">4.</span> <span class="nav-text">类与实例</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#类的常用内容"><span class="nav-number">4.1.</span> <span class="nav-text">类的常用内容</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#枚举类"><span class="nav-number">4.2.</span> <span class="nav-text">枚举类</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#元类"><span class="nav-number">4.3.</span> <span class="nav-text">元类</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#调试"><span class="nav-number">5.</span> <span class="nav-text">调试</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#try"><span class="nav-number">5.1.</span> <span class="nav-text">try</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#断言-assert"><span class="nav-number">5.2.</span> <span class="nav-text">断言(assert)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#logging"><span class="nav-number">5.3.</span> <span class="nav-text">logging</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#pdb"><span class="nav-number">5.4.</span> <span class="nav-text">pdb</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#测试"><span class="nav-number">6.</span> <span class="nav-text">测试</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#单元测试"><span class="nav-number">6.1.</span> <span class="nav-text">单元测试</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#文档测试"><span class="nav-number">6.2.</span> <span class="nav-text">文档测试</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#文件IO"><span class="nav-number">7.</span> <span class="nav-text">文件IO</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#内存-string-IO内存读写"><span class="nav-number">8.</span> <span class="nav-text">内存(string)IO内存读写</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#write"><span class="nav-number">8.1.</span> <span class="nav-text">write</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#read"><span class="nav-number">8.2.</span> <span class="nav-text">read</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#二进制bytesIO操作"><span class="nav-number">8.3.</span> <span class="nav-text">二进制bytesIO操作</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#文件操作"><span class="nav-number">9.</span> <span class="nav-text">文件操作</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#判断路径或文件即分割函数"><span class="nav-number">9.1.</span> <span class="nav-text">判断路径或文件即分割函数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#目录更改及文件夹的创造"><span class="nav-number">9.2.</span> <span class="nav-text">目录更改及文件夹的创造</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#文件夹的删除"><span class="nav-number">9.3.</span> <span class="nav-text">文件夹的删除</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#文件、文件夹的重命名"><span class="nav-number">9.4.</span> <span class="nav-text">文件、文件夹的重命名</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#文件、文件夹的复制与移动"><span class="nav-number">9.5.</span> <span class="nav-text">文件、文件夹的复制与移动</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#序列化-pickling"><span class="nav-number">10.</span> <span class="nav-text">序列化(pickling)</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#基础序列化"><span class="nav-number">10.1.</span> <span class="nav-text">基础序列化</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#class序列化"><span class="nav-number">10.2.</span> <span class="nav-text">class序列化</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#多进程"><span class="nav-number">11.</span> <span class="nav-text">多进程</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#简单进程启动"><span class="nav-number">11.1.</span> <span class="nav-text">简单进程启动</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#用进程池批量创造子进程"><span class="nav-number">11.2.</span> <span class="nav-text">用进程池批量创造子进程</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#外部子进程输入输出"><span class="nav-number">11.3.</span> <span class="nav-text">外部子进程输入输出</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#附带调用系统命令"><span class="nav-number">11.4.</span> <span class="nav-text">附带调用系统命令</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#进程间通信"><span class="nav-number">11.5.</span> <span class="nav-text">进程间通信</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#多线程"><span class="nav-number">12.</span> <span class="nav-text">多线程</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#简单启动"><span class="nav-number">12.1.</span> <span class="nav-text">简单启动</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#threading-Lock-线程锁"><span class="nav-number">12.2.</span> <span class="nav-text">threading.Lock()线程锁</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ThreadLocal各线程局部变量的全局传递实现"><span class="nav-number">12.3.</span> <span class="nav-text">ThreadLocal各线程局部变量的全局传递实现</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#分布式进程-待理解"><span class="nav-number">13.</span> <span class="nav-text">分布式进程 待理解</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#通过managers模块把Queue通过网络暴露出去，就可以让其他机器的进程访问Queue了"><span class="nav-number">13.1.</span> <span class="nav-text">通过managers模块把Queue通过网络暴露出去，就可以让其他机器的进程访问Queue了</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#正则表达式"><span class="nav-number">14.</span> <span class="nav-text">正则表达式</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#匹配法则"><span class="nav-number">14.1.</span> <span class="nav-text">匹配法则</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#re模块"><span class="nav-number">14.2.</span> <span class="nav-text">re模块</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#datetime模块-时间"><span class="nav-number">15.</span> <span class="nav-text">datetime模块 时间</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#时间"><span class="nav-number">15.1.</span> <span class="nav-text">时间</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#timestamp与datetime互相转换"><span class="nav-number">15.2.</span> <span class="nav-text">timestamp与datetime互相转换</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#str与datetime互相转换"><span class="nav-number">15.3.</span> <span class="nav-text">str与datetime互相转换</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#datetime加减"><span class="nav-number">15.4.</span> <span class="nav-text">datetime加减</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#本地时间转换为UTC时间"><span class="nav-number">15.5.</span> <span class="nav-text">本地时间转换为UTC时间</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#时区转换"><span class="nav-number">15.6.</span> <span class="nav-text">时区转换</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#collections模块-升级的Dict"><span class="nav-number">16.</span> <span class="nav-text">collections模块 升级的Dict</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#namedtuple-不变的set-本质为tuple"><span class="nav-number">16.1.</span> <span class="nav-text">namedtuple 不变的set(本质为tuple)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#deque-链表-list像数组而非链表"><span class="nav-number">16.2.</span> <span class="nav-text">deque 链表(list像数组而非链表)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#defaultdict带默认key值得dict"><span class="nav-number">16.3.</span> <span class="nav-text">defaultdict带默认key值得dict</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#OrderedDict有序的Dict-list型Dict-及队列的实现"><span class="nav-number">16.4.</span> <span class="nav-text">OrderedDict有序的Dict(list型Dict)及队列的实现</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Counter-计数器-对于不存在的key-默认值为0，相当于defaultdict"><span class="nav-number">16.5.</span> <span class="nav-text">Counter 计数器,对于不存在的key 默认值为0，相当于defaultdict</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#base64模块-二进制与字符串"><span class="nav-number">17.</span> <span class="nav-text">base64模块 二进制与字符串</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#python自带的交互界面"><span class="nav-number">18.</span> <span class="nav-text">python自带的交互界面</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#TCP编程"><span class="nav-number">19.</span> <span class="nav-text">TCP编程</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#UDP编程"><span class="nav-number">20.</span> <span class="nav-text">UDP编程</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#SMTP发送邮件"><span class="nav-number">21.</span> <span class="nav-text">SMTP发送邮件</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">陈潇</span>

  
</div>









        
<div class="busuanzi-count">
  <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv">
      <i class="fa fa-user"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
      
    </span>
  

  
    <span class="site-pv">
      <i class="fa fa-eye"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
      
    </span>
  
</div>








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  










  <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
  <script src="//unpkg.com/valine/dist/Valine.min.js"></script>
  
  <script type="text/javascript">
    var GUEST = ['nick','mail','link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item=>{
      return GUEST.indexOf(item)>-1;
    });
    new Valine({
        el: '#comments' ,
        verify: true,
        notify: true,
        appId: 'oXGA1XzMIhhs9x4yNbf1DOge-gzGzoHsz',
        appKey: 'JYRNnDQ1kh2RA7V2MYsSnRVR',
        placeholder: 'Just go go',
        avatar:'mm',
        guest_info:guest,
        pageSize:'10' || 10,
    });
  </script>



  





  

  

  

  
  

  

  

  

</body>
</html>
